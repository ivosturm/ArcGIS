// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/FeatureTable/storeUtils","./dataUtils dojo/_base/array dojo/_base/lang dojo/store/Cache dojo/store/Memory dojo/store/Observable dojo/store/util/QueryResults ../FeatureLayerQueryStore".split(" "),function(l,n,v,p,m,q,r,t){return{generateMemoryStore:function(a){var b=a.idProperty;a=n.map(a.features,function(a){return a.attributes});return new q(new m({data:a,idProperty:b}))},generateCacheStore:function(a){var b=a.grid,g=a.layer,e=a.ids||null,k=e&&e.length?e.length:b.featureCount,
h=a.orderByFields,c=a.where||null,d=a.batchCount||25,u=a.getAttachments||!1;a=a.getRelatedRecords||!1;b=new m({idProperty:b.idProperty});g=new t({layer:g,objectIds:e,totalCount:k,batchCount:d,where:c||"1\x3d1",orderByFields:h,getAttachments:u,getRelatedRecords:a});return new p(g,b)},generateSort:function(a,b,g,e){var k=function(){return function(c,d){var b=h[0],e=parseInt(b.columnId,10),f=b.attribute;"esriAttachments"!==f&&"esriRelatedRecords"!==b.fieldType||"undefined"===typeof e?(c=c[f]&&c[f].toLowerCase?
c[f].toLowerCase():c[f],d=d[f]&&d[f].toLowerCase?d[f].toLowerCase():d[f]):(c=a.columns[e].get(c),d=a.columns[e].get(d));c=l.isValueEmpty(c)?null:c.valueOf();d=l.isValueEmpty(d)?null:d.valueOf();return null===c&&null!==d?b.descending?-1:1:null!==c&&null===d?b.descending?1:-1:c===d?0:(c>d?1:-1)*(b.descending?-1:1)}},h=e&&e.sort;h&&"function"!==typeof h&&(e.sort=k());return new r(b.queryEngine(g,e)(b.data))}}});