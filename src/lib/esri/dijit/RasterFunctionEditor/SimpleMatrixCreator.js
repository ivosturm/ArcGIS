// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/RasterFunctionEditor/SimpleMatrixCreator",["dojo/_base/declare","dojo/_base/lang","dojo/Evented","./RFxGridBase"],function(e,f,g,d){return e([g],{dataType:d.DATA_TYPES.double,isExtensible:!1,isEditable:!0,_store:null,_grid:null,_initializeGrid:function(){var a=this._getGridSchema(),b=this._createDataObject();this._grid&&this._grid.destroy();this.gridContainer=document.createElement("div");this.gridDiv.appendChild(this.gridContainer);this._grid=new d({schema:a,data:b,isExtensible:this.isExtensible},
this.gridContainer);this._grid.startup();this._grid.on("grid-data-change",function(a){this._updateValue(a)}.bind(this))},_getGridSchema:function(){for(var a=[],b=this._info.columns,c=1;c<=b;c++)a.push({label:c,name:c,dataType:this.dataType,isEditable:this.isEditable});return a},_createDataObject:function(){for(var a=[],b=this._getUpdatedValue();b.length;){var c={};b.splice(0,this._info.columns).forEach(function(a,b){c[b+1]=a});a.push(c)}return a},_getUpdatedValue:function(){var a=f.clone(this._info.value),
b=this._info.rows*this._info.columns;if(!a)a=this._createValueOfSize(b);else if(a.length!==b){var c=Math.abs(a.length-b);a.length<b?(b=this._createValueOfSize(c),a=a.concat(b)):a.length>b&&(a=a.slice(0,a.length-c))}return a},_onGridSizeChange:function(){this._info.value=this._getUpdatedValue();this._initializeGrid()},_createValueOfSize:function(a){return Array.apply(null,{length:a}).map(function(){return 0})},_getValueFromGridData:function(a){var b=[];a.forEach(function(a){Object.keys(a).forEach(function(c){c&&
!isNaN(a[c])&&"id"!==c&&"idNum"!==c&&b.push(a[c])})});return this._info.value=b}})});