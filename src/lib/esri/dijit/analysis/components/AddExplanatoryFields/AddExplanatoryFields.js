// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/analysis/components/AddExplanatoryFields/AddExplanatoryFields.html":'\x3ctr data-dojo-attach-point\x3d"_componentWidget"\x3e\r\n  \x3ctd colspan\x3d"3"\x3e\r\n    \x3cdiv class\x3d"esriLeadingMargin1 explanatoryDiv longInput"\x3e\r\n      \x3ctable class\x3d"one-width"\x3e\r\n          \x3cthead\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd\x3e${i18n.explanatoryField}\x3c/td\x3e\r\n              \x3ctd\x3e${i18n.matchingField}\r\n                \x3cdiv class\x3d"warningIcon hide" data-dojo-attach-point\x3d"_warningIcon" tabindex\x3d"0"\x3e\x3c/div\x3e\r\n              \x3c/td\x3e\r\n            \x3c/tr\x3e\r\n            \x3ctr\x3e\r\n              \x3ctd colspan\x3d"2" class\x3d"formBorderBottom"\x3e\x3c/td\x3e\r\n            \x3c/tr\x3e\r\n          \x3c/thead\x3e\r\n          \x3c!-- Rows will be added below --\x3e\r\n          \x3ctbody\x3e\r\n            \x3ctr data-dojo-attach-point\x3d"_emptyRow"\x3e\x3c/tr\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n    \x3c/div\x3e\r\n  \x3c/td\x3e\r\n\x3c/tr\x3e'}});
define("esri/dijit/analysis/components/AddExplanatoryFields/AddExplanatoryFields","../../../../kernel ../../utils ../../AnalysisRegistry dijit/form/Select dijit/_WidgetBase dijit/_TemplatedMixin dijit/Tooltip dojo/_base/declare dojo/_base/lang dojo/dom-class dojo/has dojo/dom-construct dojo/Evented dojo/on dojo/i18n!../../nls/AddExplanatoryFields dojo/i18n!../../../../nls/jsapi dojo/text!./AddExplanatoryFields.html".split(" "),function(n,k,g,p,f,q,l,r,d,h,t,e,u,m,v,w,x){f=r([f,q,u],{declaredClass:"esri.dijit.analysis.components.AddExplanatoryFields.AddExplanatoryFields",
templateString:x,i18n:{},featuresToPredict:{},explanatoryVariableMatching:[],value:[],_hidden:!0,_allRowWidgets:[],constructor:function(a){},postMixInProperties:function(){this.inherited(arguments);d.mixin(this.i18n,v);d.mixin(this.i18n,w.analysisTools)},postCreate:function(){this.inherited(arguments);this._loadConnections()},destroy:function(){this.inherited(arguments)},startup:function(){this.inherited(arguments)},enable:function(){this._hidden=!1;h.remove(this._componentWidget,"hide")},disable:function(){this._hidden=
!0;h.add(this._componentWidget,"hide")},_loadConnections:function(){this.own(m(this._warningIcon,"click",d.hitch(this,function(a){this._displayWarningMessage(!0)})),m(this._warningIcon,"blur",d.hitch(this,function(a){this._displayWarningMessage(!1)})))},addRows:function(a){var b,c;this.removeAllRows();a.forEach(function(a){b=e.create("tr",null,this._emptyRow,"before");this._createExplanatoryField(b,a.label);c=this._createMatchingField({trElement:b,explanatoryFieldName:a.value,explanatoryFieldType:a.type});
this._allRowWidgets.push({trElement:b,selectWidget:c,explanatoryFieldLabel:a.label,explanatoryFieldName:a.value})},this);this.validate()},_createExplanatoryField:function(a,b){e.create("td",{"class":"padTop05 width-50"},a).innerHTML=b},_createMatchingField:function(a){var b;if(a.trElement&&a.explanatoryFieldName&&a.explanatoryFieldType)return b=e.create("td",{"class":"padTop05 width-50"},a.trElement),b=new p({"class":"attrSelect esriTableFixedLayout esriMediumlabel2"},e.create("select",null,b)),b.startup(),
k.addAttributeOptions({selectWidget:b,layer:this.featuresToPredict,allowSelectLabel:!1,priorityChange:!1,allowStringType:a.explanatoryFieldType===g.PseudoFieldTypes.String,allowNumericType:a.explanatoryFieldType===g.PseudoFieldTypes.Number,allowDateType:a.explanatoryFieldType===g.PseudoFieldTypes.Date}),b.set("value",a.explanatoryFieldName),b},removeAllRows:function(){this._allRowWidgets.forEach(function(a){this._removeRow(a,!0)},this);this._allRowWidgets=[]},_removeRow:function(a,b){a&&a.selectWidget&&
a.trElement&&(a.selectWidget.destroyRecursive(),e.destroy(a.trElement),b||this._updateAllRowWidgetsArray(a.explanatoryFieldName))},_updateAllRowWidgetsArray:function(a){var b;for(b=0;b<this._allRowWidgets.length;b++)if(this._allRowWidgets[b].explanatoryFieldName===a){this._allRowWidgets.splice(b,1);break}},_updateSelectOptions:function(a){this._allRowWidgets.forEach(function(b){k.addAttributeOptions({selectWidget:b.selectWidget,layer:a,allowSelectLabel:!1});b.selectWidget.set("value",b.explanatoryField)})},
_setExplanatoryVariableMatchingAttr:function(a){a&&this._allRowWidgets.forEach(function(b,c){b.selectWidget.set("value",a[c].predictionLayerField)})},_getExplanatoryVariableMatchingAttr:function(){var a=[],b;this._hidden||this._allRowWidgets.forEach(function(c){(b=c.selectWidget.get("value"))&&a.push({predictionLayerField:b,trainingLayerField:c.explanatoryFieldName})});return a},validate:function(){var a=this.get("explanatoryVariableMatching"),a=this._hidden||a.length===this._allRowWidgets.length;
this._displayWarningIcon(!a);return a},focus:function(){var a;for(a=0;a<this._allRowWidgets.length;a++)if(!this._allRowWidgets[a].selectWidget.get("value")){this._allRowWidgets[a].selectWidget.focus();break}},_displayWarningMessage:function(a){a?l.show(this.i18n.requiredValue,this._warningIcon):l.hide(this._warningIcon)},_displayWarningIcon:function(a){h.toggle(this._warningIcon,"hide",!a)}});t("extend-esri")&&d.setObject("esri.dijit.analysis.components.AddExplanatoryFields.AddExplanatoryFields",
f,n);return f});