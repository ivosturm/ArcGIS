// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/PictureClusteredColumns","dojo/_base/Color dojo/_base/declare dojo/_base/lang dojox/gfx dojox/gfx/utils ./_ClusteredColumnsBase ./pictureUtil/Converter ../../../supportClasses/images/ImageDataHolder".split(" "),function(A,v,B,x,C,D,y,E){return v(D,{_drawColumn:function(c,d,g,a,n,w,f,h,r){return this._drawColumnPictures(c,d.icon||a.series.isEditMode&&y.DEFAULT_SHAPE,d.bgIcon,g,a,n,w,f,h,!d.icon,r)},_drawColumnPictures:function(c,
d,g,a,n,w,f,h,r,v,t){function z(a,e,c){var d=B.mixin({},e),b=a.shapeJson||a.imageJson;a=!!a.shapeJson;if(b){var f=e.width/b.style.width,k=b.style.height*f;c=Math[!n.series.columnBarShowWholePictures||v||c?"ceil":"floor"](e.height/k);for(var p=0;p<c;p++){var m=q.createGroup();if(a){var l=y.shapeJsonToGFXJson(b);try{C.deserialize(m,l)}catch(F){console.log(F)}}else m.createImage({x:0,y:0,width:b.style.width,height:b.style.height,src:E.getImageData(b.fileName)}),m.rawNode.style.opacity=b.style.opacity;
p===c-1&&(l=(k-(c*k-e.height))/f,m.setClip({x:0,y:0<u?b.style.height-l:0,width:b.style.width,height:l}));var l=e.x,g=0<u?e.y+e.height-(p+1)*k:e.y+p*k,h=f;b.style.zoom&&(l-=e.width*(b.style.zoom-1)/2,g-=k*(b.style.zoom-1)/2,h*=b.style.zoom);m.applyTransform(x.matrix.translate(l,g));m.applyTransform(x.matrix.scale(h))}n.series.columnBarShowWholePictures&&(d.height=c*k,d.y+=e.height-d.height);return d}}t=h.data[t];var u=t[t.valueProp],q=c.createGroup();q.openBatch();c={x:a.x,y:0<u?f.t:a.y,width:a.width,
height:0<u?w.height-f.t-f.b-r:r};this.createRect(h,q,c).setFill(new A([0,0,0,.001]));n.series.showColumnBarBackground&&g&&z(g,c,!0);d&&(a=z(d,a,!1));q.closeBatch();return{shape:q,rect:a}}})});