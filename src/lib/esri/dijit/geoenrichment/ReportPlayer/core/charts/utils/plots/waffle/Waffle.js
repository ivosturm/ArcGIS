// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/waffle/Waffle","dojo/_base/lang dojo/_base/declare dojox/charting/plot2d/Base dojox/charting/plot2d/_PlotEvents dojox/charting/plot2d/common dojox/lang/utils ../animation/_WaffleAnimation ../labelsRendering/LabelsUtil ./_LabelRenderer ./_ShapeRenderer".split(" "),function(e,b,m,n,p,g,q,h,r,k){b=b([m,n,q],{defaultParams:{animate:null},optionalParams:{labelFunc:null},valueLabelElements:null,dataLabelElements:null,_animationInfos:null,
constructor:function(a,f){this.opt=e.clone(this.defaultParams);g.updateWithObject(this.opt,f);g.updateWithPattern(this.opt,f,this.optionalParams);this.run=null;this.dyn=[];this.runFilter=[]},clear:function(){this.inherited(arguments);this.dyn=[];this.run=null;return this},setAxis:function(a){return this},addSeries:function(a){this.run=a;return this},getSeriesStats:function(){return e.delegate(p.defaultStats)},getRequiredColors:function(){return this.run?this.run.data.length:0},render:function(a,f){if(!this.dirty)return this;
this.resetEvents();this.dirty=!1;this._eventSeries={};this.cleanGroup();var b=this.group,c=this.chart.theme,d=this.events();this._animationInfos=[];if(!this.run||!this.run.data.length)return this;var l=this.run.data;this.valueLabelElements=[];this.dataLabelElements=[];a=r.renderLabels(this,l,a,f,c);c=k.renderShape(l,c,b,a,this._animationInfos)(1);d&&c.shapes.forEach(function(a,b){o={element:"slice",index:b,run:this.run,shape:a};this._connectEvents(o);this._eventSeries[b]=o},this);this.opt.animate&&
this._renderAnimation(b);return this},renderLabel:function(a,b,e){var c=this,d=h.renderHTMLLabel(this.chart,a.x,a.y,a.text);this.htmlElements.push(d);b?(this.valueLabelElements.push(d),this.opt.animate&&this._animationInfos.push({isLabel:!0,func:function(b){return h.renderHTMLLabel(c.chart,a.x,a.y,e(b))}})):this.dataLabelElements.push(d);return d}});b.DEFAULT_ICON_SIZE=k.DEFAULT_ICON_SIZE;return b});