// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/grid/coreUtils/tooltip/_ScriptExpressionBuilder",["esri/dijit/geoenrichment/utils/ObjectUtil"],function(e){var f=/\s*/g,g=/(!.*?!|\+|\-|\*|\/|\(|\)|\^|\d+\.\d+|\d+)/g,d=/___.*?___/g,h=/___(.*?)___/g,k=/!/g,l=/\d+/;return{buildTooltipExpression:function(a,c){a=this._maskAndValidateExpressionText(a,c);if(!a||!a.length)return null;var b="";a.forEach(function(a){a.variable?b+="\x3cdiv class\x3d'dijitInline'\x3e\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expressionVariable'\x3e"+
a.variable.alias+"\x3c/div\x3e\x3c/div\x3e":a.operator?b+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionOperator'\x3e"+a.operator+"\x3c/div\x3e":void 0!==a.number&&(b+="\x3cdiv class\x3d'dijitInline esriGEAdjustableGrid_cellTooltip_expressionNumber'\x3e"+a.number+"\x3c/div\x3e")});return"\x3cdiv class\x3d'esriGEAdjustableGrid_cellTooltip_expression'\x3e"+b+"\x3c/div\x3e"},_maskAndValidateExpressionText:function(a,c){a=a.replace(f,"");a=a.replace(g,"___$1___");return a.replace(d,
"").length?null:a.match(d).map(function(a){a=a.replace(h,"$1");return 0===a.indexOf("!")?{variable:c.get(a.replace(k,""))}:a.match(l)?{number:e.formatNumber(Number(a))}:{operator:a}})}}});