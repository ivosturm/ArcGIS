// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/grid/valueField/ValueField","dojo/_base/Color dojo/_base/declare dojo/_base/lang dojo/on dojo/sniff dojo/dom-construct dojo/dom-class dojo/dom-geometry dijit/Destroyable ./supportClasses/TextRenderer ./supportClasses/NumberAnimator esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MathUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/UrlUtil".split(" "),function(u,e,g,p,v,c,h,q,k,f,w,r,x,y,t){function z(a){a.domNode=
c.toDom("\x3cdiv class\x3d'esriGEAdjustableGridValueField'\x3e\x3cdiv class\x3d'valueField_contentBlock'\x3e\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e");a.contentBlock=a.domNode.children[0];a.valueContainer=a.contentBlock.children[0];a.valueLabel=a.valueContainer.children[0]}var A=e(k,{_buildLayoutFunc:null,_parentNode:null,constructor:function(a,b){g.mixin(this,a);this._parentNode=b;this.postCreate()},postCreate:function(){this._buildLayoutFunc(this);
this["class"]&&h.add(this.domNode,this["class"]);this._parentNode&&this.placeAt(this._parentNode);this.value&&this.set("value",this.value)},get:function(a){return"value"===a?this._getValueAttr?this._getValueAttr():this.value:this[a]},set:function(a,b){"value"===a?this._setValueAttr?this._setValueAttr(b):this.value=b:this[a]=b},placeAt:function(a){c.place(this.domNode,a);return this},on:function(a,b){this.own(p(this.domNode,a,b))},isLeftToRight:function(){return q.isBodyLtr(document)},destroy:function(){c.destroy(this.domNode);
this._buildLayoutFunc=this.domNode=this._parentNode=null}});k={width:1,height:1,angle:1,opacity:1};var n={color:1,fontSize:1,lineHeight:1,fontFamily:1,fontWeight:1,fontStyle:1,textDecoration:1,backgroundColor:1,verticalAlign:1,horizontalAlign:1,horizontalPadding:1,verticalPadding:1,overrideStyle:1},l={borderTopColor:1,borderTopWidth:1,borderTopOpacity:1,borderTopStyle:1,borderRightColor:1,borderRightWidth:1,borderRightOpacity:1,borderRightStyle:1,borderBottomColor:1,borderBottomWidth:1,borderBottomOpacity:1,
borderBottomStyle:1,borderLeftColor:1,borderLeftWidth:1,borderLeftOpacity:1,borderLeftStyle:1},B=g.mixin({},k,n,l),m={verticalAlign:"top",horizontalAlign:"left",horizontalPadding:0,verticalPadding:0,angle:0,opacity:1};e=e(A,{__isValueField:!0,DEFAULT_STYLES:m,viewModel:null,fieldCellClass:null,trimTextIfOverflows:!1,autoDetectUrl:!1,valueLabel:null,fieldStyle:null,defaultBorderStyle:null,_borderStyle:null,content:null,postCreate:function(){this._buildLayoutFunc=this._buildLayoutFunc||z;this.inherited(arguments);
this.setStyle(this.fieldStyle);this.setContent(this.content);this.fieldCellClass&&(h.add(this.domNode,this.fieldCellClass),h.add(this.contentBlock,"contentBlock_"+this.fieldCellClass))},_destroyExistingContent:function(){this.content&&(this.content.destroy&&this.content.destroy(),this.contentContainer&&c.empty(this.contentContainer),this.content=null)},getContentContainerNode:function(a){a||this._destroyExistingContent();this.contentContainer||(this.contentContainer=c.create("div",{"class":"valueField_valueBlock"},
this.contentBlock,"first"));r.show(this.contentContainer);return this.contentContainer},setContent:function(a){this._destroyExistingContent();if(this.content=a)this.getContentContainerNode(!0),(a=this.content.domNode||this.content)&&a.parentNode!==this.contentContainer&&c.place(a,this.contentContainer);this.content?(c.destroy(this.valueContainer),this.valueContainer=null):(c.destroy(this.contentContainer),this.contentContainer=null,this._restoreValueContainer());this.content||this.set("value",this._value)},
_restoreValueContainer:function(){this.valueContainer||(this.valueContainer=c.toDom("\x3cdiv class\x3d'valueField_valueBlock'\x3e\x3cdiv class\x3d'valueField_valueLabel'\x3e\x3c/div\x3e\x3c/div\x3e"),this.valueLabel=this.valueContainer.children[0])},_value:null,_getValueAttr:function(){return this._value},_setValueAttr:function(a){this._value!==a&&(this._setValueLabelText(a),this._value=a)},_setValueLabelText:function(a){this.valueLabel&&f.renderText(this,a,this._benchmarkInfo);return a},hasOverflowText:function(){return!this.content&&
f.hasOverflowText(this)},_benchmarkInfo:null,setBenchmarkInfo:function(a){this._benchmarkInfo=a},currentNumberValue:null,numberFormatFunction:null,_canAnimate:!1,setNumberValue:function(a,b,d){this.currentNumberValue=a;this.numberFormatFunction=b;this._canAnimate=d&&this.viewModel.isAnimationAllowed();this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},notifyShown:function(){this.currentNumberValue&&this.numberFormatFunction&&this._canAnimate&&this._animateNumber()},
_animateNumber:function(){w.animateNumber(this,this.currentNumberValue,this.numberFormatFunction)},getFullStyle:function(){return g.mixin({},m,this.fieldStyle)},setStyle:function(a){a=a||{};this.fieldStyle=g.mixin(this.fieldStyle||{},a);"number"===typeof this.fieldStyle.opacity&&(this.fieldStyle.opacity=Math.max(0,Math.min(1,this.fieldStyle.opacity)));a=void 0!==a.width||void 0!==a.height;this._applyAlignAndPaddingStyles();this._applyTransformStyles();this._applyTextStyleToDom(this.domNode);(a=this._setBorderStyle()||
a)&&this._refreshLayout()},_applyAlignAndPaddingStyles:function(){this.domNode.style.textAlign=this.fieldStyle.horizontalAlign||m.horizontalAlign;var a=this.fieldStyle.verticalAlign||m.verticalAlign;this.valueLabel&&(this.valueLabel.style.paddingLeft="",this.valueLabel.style.paddingRight="",this.valueLabel.style.paddingTop="","number"===typeof this.fieldStyle.horizontalPadding&&(this.valueLabel.style.paddingLeft=this.fieldStyle.horizontalPadding+"px",this._allowRightPadding()&&(this.valueLabel.style.paddingRight=
this.fieldStyle.horizontalPadding+"px")),"number"===typeof this.fieldStyle.verticalPadding&&"top"===a&&(this.valueLabel.style.paddingTop=this.fieldStyle.verticalPadding+"px"));this.valueContainer&&(this.valueContainer.style.verticalAlign=a);this.contentContainer&&(this.contentContainer.style.verticalAlign=a);this.domNode.style.opacity="number"===typeof this.fieldStyle.opacity?this.fieldStyle.opacity:""},_allowRightPadding:function(){return this.viewModel&&this.viewModel.isGraphicStyle},_applyTransformStyles:function(){if(this.valueContainer){var a=
v("webkit")?"webkitTransform":"transform";this.valueContainer.style[a]=0!==(Number(this.fieldStyle.angle)||0)?"rotate("+this.fieldStyle.angle+"deg)":""}},_supportedTextStyles:"color fontSize lineHeight fontFamily fontWeight fontStyle textDecoration backgroundColor".split(" "),_applyTextStyleToDom:function(a){var b=this;this._supportedTextStyles.forEach(function(d){if(b.fieldStyle[d]){var c=b.fieldStyle[d]+("fontSize"===d||"lineHeight"===d?"px":"");"backgroundColor"===d?b._setNodeBackgroundColor(a,
c):a.style[d]=c}else a.style[d]=""})},_setNodeBackgroundColor:function(a,b){var d=a===this.domNode&&this.fieldStyle.angle?this.valueContainer:a;d&&(d.style.backgroundColor=b);a===this.domNode&&this.fieldStyle.angle&&(this.domNode.style.backgroundColor="transparent")},clearTextStyle:function(){for(var a in n)delete this.fieldStyle[a];this.setStyle()},clearLineHeight:function(){delete this.fieldStyle.lineHeight;this.setStyle()},_currentBorderKey:null,_SIDES:["Top","Right","Bottom","Left"],setDefaultBorderStyle:function(a){this.defaultBorderStyle=
a;this._setBorderStyle()&&this._refreshLayout()},clearBorder:function(){for(var a in l)delete this.fieldStyle[a];this.setStyle()},_setBorderStyle:function(){var a=g.mixin({},this.defaultBorderStyle,this.fieldStyle);this._borderStyle=a;var b=this._getBorderKey(a);if(this._currentBorderKey===b)return!1;this._currentBorderKey=b;this.domNode.style.border="";this._SIDES.forEach(function(b){var d="none",c=a["border"+b+"Color"],e=a["border"+b+"Width"],g=a["border"+b+"Style"]||"solid",f=a["border"+b+"Opacity"];
c&&0<e&&0!==f&&"none"!==g&&(1>f&&(c=new u(c),c.a=f,c=c.toCss(!0)),d=e+"px "+g+" "+c);this.domNode.style["border"+b]=d},this);return!0},_getBorderKey:function(a){var b="",c;for(c in l)b+=a[c]+"_";return b},_getLeftBorder:function(){return this._borderStyle?this._borderStyle.borderLeftWidth||0:0},_getLeftPadding:function(){return this.fieldStyle.horizontalPadding||0},_getRightBorder:function(){return this._borderStyle?this._borderStyle.borderRightWidth||0:0},_getRightPadding:function(){return this._allowRightPadding()?
this.fieldStyle.horizontalPadding||0:0},_getTopBorder:function(){return this._borderStyle?this._borderStyle.borderTopWidth||0:0},_getTopPadding:function(){return this.fieldStyle.verticalPadding||0},_getBottomBorder:function(){return this._borderStyle?this._borderStyle.borderBottomWidth||0:0},_getBottomPadding:function(){return this.fieldStyle.verticalPadding||0},getWidth:function(){return this.fieldStyle.width||0},getContentWidth:function(){return this.getWidth()-this._getLeftBorder()-this._getRightBorder()-
this._getLeftPadding()-this._getRightPadding()},setWidth:function(a){this.contentBlock&&this.domNode&&(a=Math.max(0,a),this.fieldStyle.width=a,this.domNode.style.width=a+"px",a=this.getWidth()-this._getLeftBorder()-this._getRightBorder(),this.contentBlock.style.width=a+"px",this.valueContainer&&(this.valueContainer.style.width=a+"px"),this.valueLabel&&(this.valueLabel.style.width=a-this._getLeftPadding()-this._getRightPadding()+"px"),this.contentContainer&&(this.contentContainer.style.width=a+"px"),
f.renderText(this),this.onWidthChanged(),this.onSizeChanged())},getHeight:function(){return this.fieldStyle.height||0},getContentHeight:function(){return this.getHeight()-this._getTopBorder()-this._getBottomBorder()-this._getTopPadding()-this._getBottomPadding()},setHeight:function(a){this.contentBlock&&this.domNode&&(a=Math.max(0,a),void 0!==this._minHeight&&(a=Math.max(a,this._minHeight)),this.fieldStyle.height=a,this.domNode.style.height=a+"px",a=this.getHeight()-this._getTopBorder()-this._getBottomBorder(),
this.contentBlock.style.height=a+"px",this.valueContainer&&(this.valueContainer.style.height=a+"px"),this.contentContainer&&(this.contentContainer.style.height=a+"px"),f.renderText(this),this.onHeightChanged(),this.onSizeChanged())},getMinHeight:function(){return this._minHeight||0},_minHeight:void 0,setMinHeight:function(a){this._minHeight=a;this.domNode.style.minHeight=a+"px";a=a-this._getTopPadding()-this._getBottomPadding();this.contentBlock.style.minHeight=a+"px";this.valueContainer&&(this.valueContainer.style.minHeight=
a+"px");this.contentContainer&&(this.contentContainer.style.minHeight=a+"px");f.renderText(this)},_refreshLayout:function(){this.setWidth(this.getWidth());this.setHeight(this.getHeight());void 0!==this._minHeight&&this.setMinHeight(this.getMinHeight())},getAngle:function(){return this.content&&this.content.getAngle?this.content.getAngle()||0:this.fieldStyle.angle||0},setAngle:function(a){this.content&&this.content.setAngle?this.content.setAngle(a):this.setStyle({angle:a||0})},isMouseOver:function(a){return this.domNode&&
y.isMouseOverBox(this.getBBox())},getBBox:function(a){a=a&&a.noTransformation?r.noTransformPosition(this.domNode):q.position(this.domNode);return 0===this.getAngle()?a:x.getRotatedRectBox(a,this.getAngle())},_urlClickHandle:null,setUrl:function(a){this._urlClickHandle&&this._urlClickHandle.remove();this.valueLabel&&(h[a?"add":"remove"](this.valueLabel,"esriGEAdjustableGridValueFieldHyperLink"),a&&(this._urlClickHandle=p(this.valueLabel,"click",function(){t.openUrl(t.toHttpUrl(a))})))},onWidthChanged:function(){},
onHeightChanged:function(){},onSizeChanged:function(){},destroy:function(){this.viewModel=null;this._destroyExistingContent();this.inherited(arguments)}});e.SUPPORTED_LAYOUT_STYLES=k;e.SUPPORTED_TEXT_STYLES=n;e.SUPPORTED_BORDER_STYLES=l;e.SUPPORTED_STYLES=B;return e});