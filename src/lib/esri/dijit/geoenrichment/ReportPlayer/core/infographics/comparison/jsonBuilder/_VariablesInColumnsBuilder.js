// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/infographics/comparison/jsonBuilder/_VariablesInColumnsBuilder",["dojo/_base/lang","./_Util","../../../sections/SectionTypes","../../../grid/coreUtils/sorting/GridRowStyler"],function(q,r,x,t){return{buildForVariablesInColumns:function(a,c,u){var g=c.thisAreas,y=c.shownGeographiesInGroup,h=[],z=c.groups,k=[],l=[],v=[],m=[],e=[],n=!1,f=a.data.data.slice();f.shift();f=t.getStyleInfo(f,a.data.columns);e.push(a.data.data.shift());for(var A=a.data.data.length-
u.numLevels,p=[],w=0;w<A;w++)p.push(a.data.data.shift());g.forEach(function(a,b){if(a){var c=p[b%p.length];h.push(a);0===b?(e.push(c),c.currentFeatureIndex=b):(a=q.clone(c),e.push(a),a.currentFeatureIndex=b,n=!0)}});a.data.data.forEach(function(a,b){if(b=y[b]){h.push(b);m.push(b);b=b.StdGeographyLevel;var c=u.additionalColumnsCache[b],d=z[b];k.push(d);e.push(a);c&&c.forEach(function(b){var c=d.cache[b];c&&(h.push(c.attributes),m.push(c.attributes),k.push({label:d.label,levelId:d.levelId,isRemovable:!0,
additionalFeatureId:b,features:[c]}),b=q.clone(a),e.push(b),n=!0)})}});a.data.data=e;if(1===e.length)return null;n&&f&&(g=a.data.data.slice(),g.shift(),t.setAlternatingColors(g,a.data.columns,f,{forceOverrideOriginal:!0}));a.data.data.forEach(function(c,b){if(0===b){var e=a.data.data[1];a.data.columns.forEach(function(a,b){if(0!==b){l.push({label:c[a.field],points:[]});var d=e.fieldInfos[a.field];v.push({label:c[a.field],name:d.name,decimals:d.decimals,formatFunction:function(a){return r.valueFormatFunction(a,
d)}})}})}else{var d=h[b-1];c.__attributes=d;a.data.columns.forEach(function(a,b){0!==b&&l[b-1].points.push({label:d.StdGeographyName,value:r.setValueToGridData(d,c,a.field)})})}});return{sectionJson:{type:x.DETAILS,stack:[a]},groups:k,chartSeriesItems:l,fields:v,ranges:c.ranges,numThisAreas:c.numThisAreas,numAreasTotal:c.numAreasTotal,numAreasShown:c.numAreasShown,geographiesInTable:m,allGeographies:c.allGeographies}}}});