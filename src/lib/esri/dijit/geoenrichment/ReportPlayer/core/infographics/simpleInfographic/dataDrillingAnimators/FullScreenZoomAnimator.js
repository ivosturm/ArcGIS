// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/dataDrillingAnimators/FullScreenZoomAnimator","dojo/_base/declare dojo/_base/lang dojo/on dojo/keys dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dijit/Destroyable esri/dijit/geoenrichment/utils/DelayUtil esri/dijit/geoenrichment/utils/DeviceUtil esri/dijit/geoenrichment/utils/DomUtil esri/dijit/geoenrichment/utils/MouseUtil esri/dijit/geoenrichment/utils/animation/AnimationUtil esri/dijit/geoenrichment/utils/mobile/GesturesUtil ../../../../ReportPlayerState".split(" "),
function(r,t,g,u,h,m,v,k,w,x,e,n,y,f,p,q){return r(w,{ddZoomScreen:null,currentTriggerButtonBox:null,ddZoomScreenClass:null,closeZoomedDDWhenClickedOutside:!0,closeZoomedDDOnEsc:!0,zIndex:null,dataDrillingViewDiv:null,domNode:null,constructor:function(b){t.mixin(this,b);e.isMobileDevice()&&p.preventDefaultOverflow(this.dataDrillingViewDiv)},play:function(b,a,d,e){function g(a){a?(n.show(c.dataDrillingViewDiv),c.dataDrillingViewDiv.parentNode!==document.body&&document.body.appendChild(c.dataDrillingViewDiv),
c.zIndex&&k.set(c.dataDrillingViewDiv,"zIndex",c.zIndex)):(c.dataDrillingViewDiv.parentNode===document.body&&document.body.removeChild(c.dataDrillingViewDiv),n.hide(c.dataDrillingViewDiv))}function l(){g(b);c._setZoomScreen(b,!1);c._setCloseHandlers(b);q.isViewingDataDrillingZoom=b;h[b?"add":"remove"](c.domNode,"isDrillingData");h.remove(c.domNode,"isShowingAnimation")}var c=this;this.currentTriggerButtonBox=d?v.position(d):this.currentTriggerButtonBox;h.add(this.domNode,"isShowingAnimation");h.add(this.dataDrillingViewDiv,
"isZoomAnimation");if(a)return g(!0),a=this.getDataDrillingPanelDimensions(e),k.set(this.dataDrillingViewDiv,{width:a.w+"px",height:a.h+"px"}),this._setZoomScreen(b,!0),b?(d=a.scale||1,a=f.animateResize({duration:200,domNode:this.dataDrillingViewDiv,fromBox:a.animateFromCenter?{x:0,y:0,w:document.body.clientWidth,h:document.body.clientHeight}:this.currentTriggerButtonBox,startScaleX:.7*d,startScaleY:.7*d,fromOffset:{x:"c",y:"c"},toBox:{x:(document.body.clientWidth-a.w*d)/2,y:(document.body.clientHeight-
a.h*d)/2+(a.yOffset||0),w:a.w,h:a.h},endScaleX:a.scale,endScaleY:a.scale,onEnd:l}),f.animateFadeIn({domNode:c.dataDrillingViewDiv,duration:100})):(a=f.animateResize({duration:200,domNode:this.dataDrillingViewDiv,toBox:this.currentTriggerButtonBox,startScaleX:a.scale,startScaleY:a.scale,endScaleX:.7*(a.scale||1),endScaleY:.7*(a.scale||1),toOffset:{x:"c",y:"c"},onEnd:l}),f.animateFadeOut({domNode:this.dataDrillingViewDiv,duration:100})),a&&a.then(function(){return x.delay(100)});l()},_setZoomScreen:function(b,
a){var d=this;b!==!!this.ddZoomScreen&&(b?(this.ddZoomScreen=m.create("div",{"class":"esriGEAbsoluteStretched simpleInfographic_dataDrillingViewDivScreen"+(e.isMobileDevice()?" mobile":"")},this.dataDrillingViewDiv,"before"),e.isMobileDevice()&&p.preventDefaultOverflow(this.ddZoomScreen),this.zIndex&&k.set(this.ddZoomScreen,"zIndex",this.zIndex),this.ddZoomScreenClass&&h.add(this.ddZoomScreen,this.ddZoomScreenClass),a&&f.animateFadeIn({domNode:this.ddZoomScreen,duration:100})):(b=function(){d.ddZoomScreen&&
m.destroy(d.ddZoomScreen);d.ddZoomScreen=null},a?f.animateFadeOut({domNode:this.ddZoomScreen,duration:100,onEnd:b}):b()))},_clickOutsideHandler:null,_keyboardHandler:null,_setCloseHandlers:function(b){var a=this;this._clickOutsideHandler&&this._clickOutsideHandler.remove();this._clickOutsideHandler=null;this._keyboardHandler&&this._keyboardHandler.remove();this._keyboardHandler=null;b&&(this.closeZoomedDDWhenClickedOutside&&(this._clickOutsideHandler=g(document.body,e.press,function(){if(!q.isViewingDynamicSettings&&
!y.isMouseOver(a.dataDrillingViewDiv,{checkAllChildren:!0})&&!a.isMouseOver())a.onExitDataDrilling()}),this.own(this._clickOutsideHandler)),this.closeZoomedDDOnEsc&&(this._keyboardHandler=g(document.body,"keyup",function(b){if(b.keyCode===u.ESCAPE)a.onExitDataDrilling()}),this.own(this._keyboardHandler)))},isMouseOver:function(){return!1},getDataDrillingPanelDimensions:function(b){return null},onExitDataDrilling:function(){}})});