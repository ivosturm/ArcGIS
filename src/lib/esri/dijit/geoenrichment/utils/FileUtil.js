// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/FileUtil",["esri/dijit/geoenrichment/Deferred","./DataUtil","./ImageUtil"],function(e,k,l){function h(){return new e.reject(Error("Saving not supported."))}var f=h,m=/[\\/:*?"<>|]/g,d={savingSupported:function(){return void 0!==window.Blob},saveTextFile:function(a,c,b){return d.savingSupported()?d.saveAs(new Blob([a],{type:b||"text/plain"}),c||"text.txt"):h()},saveImageFile:function(a,c){if(d.savingSupported()){var b;"string"===typeof a?(b=l.base64DataFromDataURL(a),
b=k.binaryStringToByteArray(atob(b)).buffer):a instanceof ArrayBuffer&&(b=a);return d.saveAs(b?k.arrayBuffersToBlob([b],"image/png"):a,c)}h()},saveAs:function(a,c){return f(a,d.validateName(c||"download"))},validateName:function(a){return String(a).trim().replace(m,"")}};if(!d.savingSupported())return d;if(window.navigator&&window.navigator.msSaveOrOpenBlob)return f=function(a,c){var b=new e;window.navigator.msSaveOrOpenBlob(a,c)?b.resolve():b.reject(Error("Failed to save or open downloaded file."));
return b.promise},d;var g=window.URL||window.webkitURL;if("download"in window.document.createElement("a")){var n=function(a){var c;void 0!==window.MouseEvent?c=new MouseEvent("click",{bubbles:!0,cancelable:!1}):(c=document.createEvent("MouseEvent"),c.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null));a.dispatchEvent(c)},f=function(a,c){var b=new e,d=g.createObjectURL(a);a=window.document.createElement("a");a.href=d;a.download=c;n(a);setTimeout(function(){g.revokeObjectURL(d);b.resolve()},
1E3);return b.promise};return d}f=function(a,c){var b=new e;a=new File([a],c,{type:a.type});var d=g.createObjectURL(a);window.open(d,"_blank");setTimeout(function(){g.revokeObjectURL(d);b.resolve()},1E3);return b.promise};return d});