// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/metadata/base/xml/XmlInterrogator","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has ./XmlFlattener ./xmlUtil ../../../../kernel".split(" "),function(e,l,k,m,n,p,q){e=e(null,{constructor:function(a){l.mixin(this,a)},interrogate:function(a,d){a=(new n).flatten(a);var r=a.prefixesByUri,h=a.valuesByPath,b={};k.forEach(d,function(c){var a=c.interrogationRules;if(a&&0!==a.length){var f=p.makeGxeUrisByPrefix(c.getNamespaces());c=c.key;var d=a.length,g=0,e=!1;k.forEach(a,function(c){var b=
c.path;b&&(b=this._transformPath(r,f,b),(c=this._evaluateMatch(h,b,c))?g++:a.must&&(e=!0))},this);!e&&0<g&&(b[c]={nRules:d,nRulesMatched:g})}},this);var f=null,g=0;k.forEach(d,function(a){var c=a.key,d=null;c in b&&(d=b[c],null===f?(f=a,g=d.nRulesMatched):d.nRulesMatched>g&&d.nRules===d.nRulesMatched&&(f=a,g=d.nRulesMatched))});return f},_evaluateMatch:function(a,d,e){var h=!1,b=null;"undefined"!==typeof e.value&&(b=e.value);if(d in a){if(null===b)return!0;a=a[d];h=k.some(a,function(a){return b===
a})}return h},_transformPath:function(a,d,e){var h=[],b,f,g;k.forEach(e.split("/"),function(c){var e=-1!==c.indexOf("@");b=c.replace("@","").split(":");2===b.length?(f=null,(g=d[b[0]])&&(f=a[g]),f?(e&&(f="@"+f),h.push(f+":"+b[1])):h.push(c)):h.push(c)});return h.join("/")}});m("extend-esri")&&l.setObject("dijit.metadata.base.xml.XmlInterrogator",e,q);return e});