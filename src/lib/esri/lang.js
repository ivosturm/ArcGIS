// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/lang","dojo/_base/array dojo/_base/json dojo/_base/kernel dojo/_base/lang dojo/date dojo/has dojo/number dojo/date/locale ./kernel".split(" "),function(m,w,x,g,y,z,A,B,h){function r(a,c,b,d){(c=c&&c[a])?c={formatType:c.formatType,options:c}:d&&-1!==m.indexOf(d.properties||"",a)?c={formatType:d.formatter||"DateString",options:null}:b&&-1!==m.indexOf(b.properties||"",a)&&(c={formatType:b.formatter||"NumberFormat",options:null});return c}function t(a,c,b){return[g.isString(a)?a.split(""):
a,c||x.global,g.isString(b)?new Function("item","index","array",b):b]}function k(a){return void 0!==a&&null!==a}function n(a){return k(a)?a:""}function p(a,c,b,d){var e=b.match(/([^\(]+)(\([^\)]+\))?/i);b=g.trim(e[1]);var f=e[2]?g.trim(e[2]):null,e=c[a];d=d||(f?w.fromJson(f.replace(/^\(/,"({").replace(/\)$/,"})")):{});f=d.utcOffset;if(-1===m.indexOf(C,b))b=g.getObject(b),g.isFunction(b)&&(e=b(e,a,c,d));else if("number"===typeof e||"string"===typeof e&&e&&!isNaN(Number(e)))switch(e=Number(e),b){case "NumberFormat":return A.format(e,
d);case "DateString":a=new Date(e);if(d.local||d.systemLocale)return d.systemLocale?a.toLocaleDateString()+(d.hideTime?"":" "+a.toLocaleTimeString()):a.toDateString()+(d.hideTime?"":" "+a.toTimeString());a=a.toUTCString();d.hideTime&&(a=a.replace(/\s+\d\d\:\d\d\:\d\d\s+(utc|gmt)/i,""));return a;case "DateFormat":return a=new Date(e),k(f)&&(a=y.add(a,"minute",a.getTimezoneOffset()-f)),B.format(a,d)}return n(e)}function q(a,c){var b;if(c)for(b in a)a.hasOwnProperty(b)&&(void 0===a[b]?delete a[b]:a[b]instanceof
Object&&q(a[b],!0));else for(b in a)a.hasOwnProperty(b)&&void 0===a[b]&&delete a[b];return a}var C=["NumberFormat","DateString","DateFormat"],u=/<\/?[^>]+>/g,v={valueOf:function(a,c){for(var b in a)if(a[b]==c)return b;return null},stripTags:function(a){if(a){var c=typeof a;if("string"===c)a=a.replace(u,"");else if("object"===c)for(var b in a)(c=a[b])&&"string"===typeof c&&(c=c.replace(u,"")),a[b]=c}return a},substitute:function(a,c,b){var d,e,f,l;k(b)&&(g.isObject(b)?(d=b.first,e=b.dateFormat,f=b.numberFormat,
l=b.format):d=b);if(c&&"${*}"!==c)return g.replace(c,g.hitch({obj:a},function(a,b){var c=b.split(":");return 1<c.length?(b=c[0],c.shift(),(a=l&&l[c[0]])?c=a.formatType:(c=c.join(":"),a=null),p(b,this.obj,c,a)):(a=r(b,l,f,e))?p(b,this.obj,a.formatType,a.options):n(this.obj[b])}),/\$\{([^\}]+)\}/g);c=[];for(var h in a)if(b=(b=r(h,l,f,e))?p(h,a,b.formatType,b.options):a[h],c.push(h+" \x3d "+n(b)+"\x3cbr/\x3e"),d)break;return c.join("")},filter:function(a,c,b){c=t(a,b,c);b={};var d;a=c[0];for(d in a)c[2].call(c[d],
a[d],d,a)&&(b[d]=a[d]);return b},startsWith:function(a,c,b){b=b||0;return a.indexOf(c,b)===b},endsWith:function(a,c,b){if("number"!==typeof b||!isFinite(b)||Math.floor(b)!==b||b>a.length)b=a.length;b-=c.length;a=a.indexOf(c,b);return-1!==a&&a===b},isDefined:k,fixJson:q,isObject:function(a){return a&&"object"===typeof a},isString:function(a){return"string"===typeof a},mixin:function(a,c){for(var b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return a},clone2DArray:function(a){if(a=a?a.slice(0):null){var c,
b=a.length;for(c=0;c<b;c++)a[c]=a[c]?a[c].slice(0):null}return a},clone3DArray:function(a){if(a=a?a.slice(0):null){var c,b=a.length;for(c=0;c<b;c++){a[c]=a[c]?a[c].slice(0):null;var d=a[c];if(d){var e,f=d.length;for(e=0;e<f;e++)d[e]=d[e]?d[e].slice(0):null}}}return a}};z("extend-esri")&&(g.mixin(h,v),h._isDefined=k,h._getParts=t,h._sanitize=q);return v});