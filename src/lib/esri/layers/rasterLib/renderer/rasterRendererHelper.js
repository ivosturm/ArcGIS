// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/layers/rasterLib/renderer/rasterRendererHelper","dojo/_base/declare dojo/_base/lang ../../PixelBlock ./RasterColormapRenderer ./RasterUniqueValueRenderer ./RasterRGBRenderer ./RasterStretchColorRampRenderer".split(" "),function(w,x,y,r,t,u,v){var l=function(){function a(a){b[a.prototype.rendererName]=a}var b={};a(r);a(u);a(v);a(t);return b}();return{wellKnownRenderers:l,isSupported:function(a){if(!a)return!1;var b=!0;l[a.rendererName]||(b=!1);return b},create:function(a){if(!a)return null;
var b;a.rendererName?(b=a.rendererName,a=a.rendererArguments):(b=["uniqueValue","rasterStretch","rgb","colormap"].indexOf(a.type),b=["UniqueValue","Stretch","RGB","Colormap"][b],"rasterStretch"===a.type&&a.bandIndex&&1<a.bandIndex.length&&(b="RGB"));return new l[b](a)},createDefaultRenderer:function(a){if(a&&a.raster){var b=a.raster.rasterInfo,n=a.raster.dataType;if(b){var e=a.raster.rasterFunction,f=["Stretch","Colormap","ContrastAndBrightness"];if(e&&"U8"===b.pixelType&&-1<f.indexOf(e.functionName))e.renderTexture=
!0;else if("Processed"!==n||!(a.useWebGL&&e&&e.renderTexture||!a.useWebGL&&"U8"===b.pixelType)){var e=b.bandCount,d=b.colormap,c=b.vat,f=b.histograms,g;f&&0===f.length&&(f=null);var h=b.statistics&&b.statistics.map(function(a){return[a.min,a.max,a.mean,a.stddev]}),k=b.keyProperties&&(b.keyProperties.bandProperties||b.keyProperties.BandProperties);if(1===e&&d&&0<d.length)g=new r({colormap:d||c});else if(1===e&&c&&c.features&&0<c.features.length)g=new t({});else{d=0;c=!1;n||!a.raster||!a.raster.tileInfo||
void 0!==a.raster.tileInfo.tileType&&"Map"!==a.raster.tileInfo.tileType?"U8"===b.pixelType&&"Processed"===n?(d=5,h=h||[[0,255,0,0],[0,255,0,0],[0,255,0,0]],c=!1):"U8"===b.pixelType||"Elevation"===n?(d=5,c=h?!1:!0):"Scientific"===n?(d=5,c=h?!1:!0,g=this._getDefaultScientificColorRamp()):f&&0<f.length?(d=6,c=!1):h?(d=5,c=!1):(d=6,c=!0):(h=[[0,255,0,0],[0,255,0,0],[0,255,0,0]],d=5,c=!1);h||(d=5,c=!0);var m,l,p,q;if(3<=e&&k&&!(a.bandIds||a.raster&&a.raster.imageServiceParams&&a.raster.imageServiceParams.bandIds)){for(a=
0;a<k.length;a++)k[a].BandName&&"red"===k[a].BandName.toLowerCase()&&(l=a),k[a].BandName&&"green"===k[a].BandName.toLowerCase()&&(p=a),k[a].BandName&&"blue"===k[a].BandName.toLowerCase()&&(q=a);void 0!==l&&void 0!==p&&void 0!==q&&(m=[l,p,q])}m={stretchType:d,min:0,max:255,dra:c,minPercent:.25,maxPercent:.25,useGamma:!1,computeGamma:!1,statistics:h,histograms:f,numberOfStandardDeviations:2.5,bandIndex:m};1===e?(g&&(m.colorRamp=g,m.invert=!0),g=new v(m)):g=new u(m)}return g}}}},_getDefaultScientificColorRamp:function(){return{type:"multipart",
colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]}}}});