// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/views/2d/engine/webgl/displayObjectUtils","require exports ../../../../core/tsSupport/assignHelper ./enums ./enums ./MaterialInfoUtils ./mesh ./textMeshUtils ./Utils ./visualVariablesUtils ./WGLDisplayObject ./WGLDisplayRecord".split(" "),function(E,r,F,k,g,z,A,B,f,v,C,D){function w(f,l){if(!f)return k.WGLVVFlag.NONE;for(var m=0,g=0;g<f.length;g++){var n=f[g];"size"===n.type&&"outline"!==n.target?m|=v.getTypeOfSizeVisualVariable(n):"color"===n.type?m|=k.WGLVVFlag.COLOR:
"opacity"===n.type?m|=k.WGLVVFlag.OPACITY:l&&"rotation"===n.type&&(m|=k.WGLVVFlag.ROTATION)}return m}Object.defineProperty(r,"__esModule",{value:!0});var l=[];r.getDisplayObject=function(u,q,m,x,n,r,p){q=u.attributes[q];var y=new C(q);l.length=0;var a=m.renderer,e=m.getSymbol(u);if(e){var c=f.isMarkerSymbol(e)||f.isTextSymbol(e);if("esriGeometryPoint"===x||"esriGeometryPolyline"===x)l.push({symbol:e,vv:w(a.visualVariables,c)});else if(c){if(a.backgroundFillSymbol){var c=a.backgroundFillSymbol,b=k.WGLVVFlag.NONE;
if(a.visualVariables)for(var h=0,t=a.visualVariables;h<t.length;h++){var d=t[h],d=d.type;"color"===d?b|=k.WGLVVFlag.COLOR:"opacity"===d&&(b|=k.WGLVVFlag.OPACITY)}l.push({symbol:c,vv:b,isBFS:!0});if(c.outline&&"none"!==c.outline.style){b=k.WGLVVFlag.NONE;if(a.visualVariables)for(h=0,t=a.visualVariables;h<t.length;h++)if(d=t[h],"size"===d.type&&"outline"===d.target){b|=v.getTypeOfSizeVisualVariable(d);break}l.push({symbol:c.outline,vv:b})}}l.push({symbol:e,vv:w(a.visualVariables,!0)})}else if(f.isFillSymbol(e)){d=
k.WGLVVFlag.NONE;if(a.visualVariables)for(b=0,h=a.visualVariables;b<h.length;b++)c=h[b],c=c.type,"color"===c?d|=k.WGLVVFlag.COLOR:"opacity"===c&&(d|=k.WGLVVFlag.OPACITY);l.push({symbol:e,vv:d});if(e.outline&&"none"!==e.outline.style){d=k.WGLVVFlag.NONE;if(a.visualVariables)for(b=0,a=a.visualVariables;b<a.length;b++)if(c=a[b],"size"===c.type&&"outline"===c.target){d|=v.getTypeOfSizeVisualVariable(c);break}l.push({symbol:e.outline,vv:d})}}else f.isLineSymbol(e)&&l.push({symbol:e,vv:w(a.visualVariables,
c)})}for(e=0;e<l.length;e++){c=l[e];d=c.symbol;a=f.getSymbolGeometryType(d);b=0!==c.vv;switch(a){case g.WGLGeometryType.MARKER:p.icon||(p.icon=f.getStrides(g.WGLGeometryType.MARKER,b,!1));break;case g.WGLGeometryType.LINE:p.line||(p.line=f.getStrides(g.WGLGeometryType.LINE,b));break;case g.WGLGeometryType.FILL:p.fill||(p.fill=f.getStrides(g.WGLGeometryType.FILL,b));break;case g.WGLGeometryType.TEXT:p.text||(p.text=f.getStrides(g.WGLGeometryType.TEXT,b))}if(a===g.WGLGeometryType.TEXT)for(b=0,a=B.createTextDisplayRecords(u,
c,q,m,r,f.getTextProperties(d),a);b<a.length;b++)y.displayRecords.push(a[b]);else if(h=r.get(d),b=z.createMaterialInfo(h,a,c.vv),b.materialKeyInfo.hasVV(),c=A.createMesh(q,m,b.materialKeyInfo,h,a,x,n,u,d,c.isBFS))a=new D(q,a,b),a.meshData=c,y.displayRecords.push(a)}return y}});