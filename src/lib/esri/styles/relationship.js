// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/styles/relationship","dojo/_base/array dojo/_base/lang dojo/has ../kernel ../Color ./colors ./utils".split(" "),function(h,v,A,B,m,C,D){function q(a,b){return h.map(a,function(a){a=new m(a);null!=b&&(a.a=b);return a})}function E(a){var b=a.basemapGroups;a=a.basemaps;var c,d=[];if(b)for(c in b)d=d.concat(b[c]);else a&&(d=d.concat(a));return d}function p(a,b,c,d){var e,f=1;do{e=a;var k=b,g=void 0,h=l.getColors(e,c,d);h&&1===D.haveIdenticalColors(k,h)&&(g=e);e=g;e||(a=l.flipColors(a),f++)}while(!e&&
4>=f);return e}function w(a,b,c){return p(a,b,c,"HH")||p(a,b,c,"HL")||p(a,b,c,"LH")||p(a,b,c,"LL")}function x(a,b,c,d,e){var f,k=C[a];if(k){f={id:d+"/"+e+"/"+a,colorsForClassBreaks:[]};for(var g in k)g=+g,a=h.map(k[g],function(a){return q(a)}),f.colorsForClassBreaks.push({numClasses:g,colors:a});f.noDataColor=new m(b.noDataColor);f.opacity=b.fillOpacity||1;switch(c){case "point":f.outline={color:new m(b.outline.color),width:b.outline.width};f.size=b.size;break;case "line":f.width=b.width;break;case "polygon":f.outline=
{color:new m(b.outline.color),width:b.outline.width}}}return f}function y(a){if("esriGeometryPoint"===a||"esriGeometryMultipoint"===a)a="point";else if("esriGeometryPolyline"===a)a="line";else if("esriGeometryPolygon"===a||"esriGeometryMultiPatch"===a)a="polygon";return a}var z={color:[153,153,153,.25],width:1},r="relationship-brewer-yellow-blue-black relationship-brewer-pink-blue-purple relationship-purple-green-blue relationship-blue-green-purple relationship-blue-orange-green relationship-mustard-blue-wine relationship-pink-blue-purple relationship-olive-blue-green relationship-yellow-cyan-blue relationship-blue-pink-purple relationship-purple-green-wine".split(" "),
t="relationship-brewer-yellow-blue-black relationship-brewer-pink-blue-purple relationship-purple-green-blue relationship-blue-green-purple relationship-blue-orange-green relationship-mustard-blue-wine relationship-pink-blue-purple relationship-olive-blue-green relationship-yellow-cyan-blue relationship-blue-pink-purple relationship-purple-green-wine".split(" "),n={"default":{name:"default",label:"Default",description:"Default theme for visualizing features based on relationship between two attributes.",
basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm".split(" "),dark:["satellite","hybrid","dark-gray"]},pointSchemes:{light:{common:{noDataColor:"#aaaaaa",outline:z,size:8},primary:"relationship-blue-orange-brown",secondary:r},dark:{common:{noDataColor:"#aaaaaa",outline:{color:[26,26,26,.25],width:1},size:8},primary:"relationship-blue-orange-brown",secondary:t}},lineSchemes:{light:{common:{noDataColor:"#aaaaaa",width:2},primary:"relationship-blue-orange-brown",secondary:r},
dark:{common:{noDataColor:"#aaaaaa",width:2},primary:"relationship-blue-orange-brown",secondary:t}},polygonSchemes:{light:{common:{noDataColor:"#aaaaaa",outline:z,fillOpacity:.8},primary:"relationship-blue-orange-brown",secondary:r},dark:{common:{noDataColor:"#aaaaaa",outline:{color:[153,153,153,.25],width:1},fillOpacity:.8},primary:"relationship-blue-orange-brown",secondary:t}}}},u={};(function(){var a,b,c,d,e,f,k,g;for(a in n)for(d in b=n[a],c=b.basemapGroups,e=u[a]={basemaps:[].concat(c.light).concat(c.dark),
point:{},line:{},polygon:{}},c)for(f=c[d],k=0;k<f.length;k++)g=f[k],b.pointSchemes&&(e.point[g]=b.pointSchemes[d]),b.lineSchemes&&(e.line[g]=b.lineSchemes[d]),b.polygonSchemes&&(e.polygon[g]=b.polygonSchemes[d])})();var l={getAvailableThemes:function(a){var b=[],c,d,e;for(c in n)d=n[c],e=u[c],a&&-1===h.indexOf(e.basemaps,a)||b.push({name:d.name,label:d.label,description:d.description,basemaps:e.basemaps.slice(0)});return b},getSchemes:function(a){var b=a.theme,c=a.basemap,d=y(a.geometryType);a=u[b];
var e,f;(e=(e=a&&a[d])&&e[c])&&(f={primaryScheme:x(e.primary,e.common,d,b,c),secondarySchemes:h.map(e.secondary,function(a){return x(a,e.common,d,b,c)})});return f},cloneScheme:function(a){var b;a&&(b=v.mixin({},a),b.colorsForClassBreaks=h.map(b.colorsForClassBreaks,function(a){var b=h.map(a.colors,function(a){return q(a)});return{numClasses:a.numClasses,colors:b}}),b.noDataColor&&(b.noDataColor=new m(b.noDataColor)),b.outline&&(b.outline={color:b.outline.color&&new m(b.outline.color),width:b.outline.width}));
return b},flatten2DArray:function(a,b){var c=[];b=(b||"HH").split("");var d=b[1];"L"===b[0]&&a.reverse();var e="H"===d;h.forEach(a,function(a){e&&a.reverse();c=c.concat(a)});return c},getColors:function(a,b,c){var d;h.some(a.colorsForClassBreaks,function(a){a.numClasses===b&&(d=a.colors);return!!d});return(d=h.map(d,function(a){return q(a)}))?l.flatten2DArray(d,c):null},flipColors:function(a,b){a=b?a:l.cloneScheme(a);h.forEach(a.colorsForClassBreaks,function(a){for(var b=a.colors.reverse(),e=[],c=
0;c<a.numClasses;c++){var k=[];h.forEach(b,function(a){k.push(a[c])});e.push(k)}a.colors=e});return a},getMatchingSchemes:function(a){var b=a.theme,c=y(a.geometryType),d=a.colors,e=a.numClasses;a=E(n[b]);var f=[];h.forEach(a,function(a){if(a=l.getSchemes({theme:b,basemap:a,geometryType:c})){var g=w(a.primaryScheme,d,e);g&&f.push(g);h.forEach(a.secondarySchemes,function(a){(g=w(a,d,e))&&f.push(g)})}});return f}};A("extend-esri")&&v.setObject("styles.relationship",l,B);return l});