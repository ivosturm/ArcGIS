// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/tasks/datareviewer/DashboardTask","dojo/_base/declare dojo/_base/array dojo/_base/lang dojo/Deferred dojo/has ./_DRSBaseTask ./DashboardResult ./ReviewerFilters ../../kernel ../../request".split(" "),function(d,k,h,l,n,p,q,r,t,m){d=d(p,{declaredClass:"esri.tasks.datareviewer.DashboardTask",constructor:function(a){this.onGetDashboardResultsComplete=h.hitch(this,this.onGetDashboardResultsComplete);this.onGetDashboardFieldNamesComplete=h.hitch(this,this.onGetDashboardFieldNamesComplete)},
getDashboardResults:function(a,b){var d=this._successHandler,g=this._errorHandler,f=this._appendQueryParams,e=new l;null===b||void 0===b?(a=this._url+"/Dashboard/reviewerResultsBy/"+a,b={f:"json"}):(a=this._url+"/Dashboard/reviewerResultsBy/"+a+"/filter",b={f:"json",filtersArray:b.toJSON()});a=f(a);m({callbackParamName:"callback",url:a,content:b}).then(h.hitch(this,function(c,a){if(void 0!==c.error)a=Error(),a.message=c.error.message,a.code=c.error.code,g(a,e);else try{if(void 0===c.dashboardResults)g(null,
e);else{var b=new q;k.forEach(c.dashboardResults,function(a,c){b.fieldValues.push(a.fieldValue);b.counts.push(a.count)});b.fieldName=c.fieldName;var f=new r;f.createFromJsonObject(c);b.filters=f;d({dashboardResult:b},"onGetDashboardResultsComplete",e)}}catch(v){g(v,e)}}),function(a,b){g(a,e)});return e},getDashboardFieldNames:function(){var a=this._successHandler,b=this._errorHandler,d=this._appendQueryParams,g=this._url+"/Dashboard",g=d(g),f=new l;m({callbackParamName:"callback",url:g,content:{f:"json"}}).then(h.hitch(this,
function(e,c){if(void 0!==e.error)c=Error(),c.message=e.error.message,c.code=e.error.code,b(c,f);else try{var d=[];k.forEach(e.reviewerResultsBy,function(a,b){d.push(a.name)});a({fieldNames:d},"onGetDashboardFieldNamesComplete",f)}catch(u){b(u,f)}}),function(a,c){b(a,f)});return f},onGetDashboardResultsComplete:function(a){},onGetDashboardFieldNamesComplete:function(a){}});n("extend-esri")&&h.setObject("tasks.datareviewer.DashboardTask",d,t);return d});