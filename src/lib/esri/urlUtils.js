// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/urlUtils","dojo/_base/lang dojo/_base/array dojo/_base/url dojo/global dojo/io-query ./kernel ./lang ./config ./sniff dojo/i18n!./nls/jsapi".split(" "),function(h,r,p,l,t,k,u,e,q,v){var c={},m=e.defaults.io,y=/^[a-z][a-z0-9\+\-\.]*:/i,w=/^\s*http:/i,x=/^\s*https:/i,z=/:\d+$/,A=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;c.isHTTP=function(a){var b=l.location.protocol;return null==a?"http:"===b||"https:"===b:a?"https:"===b:"http:"===b};c.getProtocolForWebResource=function(a){return c.isHTTP()?
l.location.protocol:a?"https:":"http:"};c.urlToObject=function(a){var b={},c=new p(a),d=a.indexOf("?");null===c.query?b={path:a,query:null}:(b.path=a.substring(0,d),b.query=t.queryToObject(c.query));c.fragment&&(b.hash=c.fragment,null===c.query&&(b.path=b.path.substring(0,b.path.length-(c.fragment.length+1))));return b};c.getProxyUrl=function(a,b){var f=h.isString(a)?0===h.trim(a).toLowerCase().indexOf("https:"):a,d=m.proxyUrl,g,n=v.io.proxyNotSet;h.isString(a)&&(a=c.getProxyRule(a))&&(d=a.proxyUrl);
if(!d)throw console.log(n),Error(n);f&&!1!==b&&0!==l.location.href.toLowerCase().indexOf("https:")&&(b=d,0!==b.toLowerCase().indexOf("http")&&(b=c.getAbsoluteUrl(b)),b=b.replace(/^http:/i,"https:"),c.canUseXhr(b)&&(d=b,g=1));d=c.urlToObject(d);d._xo=g;return d};c.addProxy=function(a){var b=c.getProxyRule(a),f;b?f=c.urlToObject(b.proxyUrl):m.alwaysUseProxy&&(f=c.getProxyUrl());f&&(b=c.urlToObject(a),a=f.path+"?"+b.path,(f=t.objectToQuery(h.mixin(f.query||{},b.query)))&&(a+="?"+f));return a};c.addProxyRule=
function(a){var b=a.urlPrefix=c.urlToObject(a.urlPrefix).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),f=m.proxyRules,d,g=f.length,n,e=g;for(d=0;d<g;d++)if(n=f[d].urlPrefix,0===b.indexOf(n)){if(b.length===n)return-1;e=d;break}else 0===n.indexOf(b)&&(e=d+1);f.splice(e,0,a);return e};c.getProxyRule=function(a){var b=m.proxyRules,f=b.length,d=c.urlToObject(a).path.replace(/([^\/])$/,"$1/").replace(/^https?:\/\//ig,"").toLowerCase(),g;for(a=0;a<f;a++)if(0===d.indexOf(b[a].urlPrefix)){g=
b[a];break}return g};c.hasSameOrigin=function(a,b,c){a=a.toLowerCase();b=b.toLowerCase();var d=l.location.href.toLowerCase();a=0===a.indexOf("http")?new p(a):d=new p(d);b=0===b.indexOf("http")?new p(b):h.isString(d)?new p(d):d;return(c||a.scheme===b.scheme)&&a.host===b.host&&a.port===b.port};c.canUseXhr=function(a,b){var f=q("esri-phonegap")?!0:!1,d=c.hasSameOrigin,g=m.corsEnabledServers,e,h=-1;!f&&q("esri-cors")&&g&&g.length&&(f=r.some(g,function(b,c){b=!b||"object"!==typeof b||b instanceof RegExp?
b:b.host;if(b instanceof RegExp){if(b.test(a))return h=c,!0}else if(b&&(e=0!==b.trim().toLowerCase().indexOf("http"),d(a,e?"http://"+b:b)||e&&d(a,"https://"+b)))return h=c,!0;return!1}));return b?h:f};c.getAbsoluteUrl=function(a){var b=c.getProtocolForWebResource();return h.isString(a)&&!y.test(a)?0===a.indexOf("//")?b+a:0===a.indexOf("/")?b+"//"+l.location.host+a:k._appBaseUrl+a:a};c.fixUrl=function(a){a=h.trim(a);a=c.getAbsoluteUrl(a);a=c.normalizeSlashes(a);a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,
"$1www.$2");a=c.downgradeToHTTP(a);return a=c.upgradeToHTTPS(a)};c.normalize=function(a){return c.fixUrl(a)};c.normalizeSlashes=function(a){if(/^https?:\/\//i.test(a)){var b,c,d=a.indexOf("?");-1<d?(b=a.slice(0,d),c=a.slice(d+1)):b=a;a=b.replace(/\/{2,}/g,"/");a=a.replace("/","//");c&&(a+="?"+c)}return a};c.downgradeToHTTP=function(a){return c.isHTTP(!1)&&x.test(a)&&c.hasSameOrigin(l.location.href,a,!0)&&!c.canUseXhr(a)?a.replace(x,"http:"):a};c.upgradeToHTTPS=function(a){var b=m.httpsDomains,f=c.isHTTP(!1),
d=c.isHTTP(!0);if(!w.test(a))return a;a=h.trim(a);var g=a.indexOf("/",7),g=-1===g?a:a.slice(0,g),g=g.toLowerCase().slice(7);if(z.test(g))if(u.endsWith(g,":80"))g=g.slice(0,-3),a=a.replace(":80","");else return a;if(f&&g===l.location.host&&(!A.test(a)||!c.canUseXhr(a)))return a;f=!1;if(d&&g===l.location.host)f=!0;else if(b)for(var e=0;e<b.length;e++){var k=b[e];if(g===k||u.endsWith(g,"."+k)){f=!0;break}}f||!d||m.alwaysUseProxy||c.getProxyRule(a)||(f=!0);f&&(a=a.replace(w,"https:"));return a};e=v.widgets.popup;
var B=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,label:e.NLS_moreInfo},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"${hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,appName:"App Studio Player",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,appName:"Collector",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,appName:"Explorer",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,
appName:"Navigator",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,appName:"Survey123",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,appName:"Trek2There",label:e.NLS_openLinkInApp},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,appName:"Workforce",label:e.NLS_openLinkInApp},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,appName:"iForm",label:e.NLS_openLinkInApp},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,appName:"FlowFinity",label:e.NLS_openLinkInApp},
{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,appName:"Laserfische",label:e.NLS_openLinkInApp},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,appName:"Microsoft Power BI",label:e.NLS_openLinkInApp}];c.getURIInfo=function(a){var b;r.some(B,function(c){c.pattern.test(a)&&(b=c);return!!b});return b};c.isKnownURI=function(a){return!!c.getURIInfo(a)};q("extend-esri")&&(h.mixin(k,c),k._getProxyUrl=c.getProxyUrl,k._getProxiedUrl=c.addProxy,k._hasSameOrigin=c.hasSameOrigin,k._canDoXOXHR=c.canUseXhr,k._getAbsoluteUrl=
c.getAbsoluteUrl,k.fixUrl=c.fixUrl);return c});