// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/GeocodeMatch/templates/Popup.html":"\x3cdiv\x3e\r\n  \x3cdiv  class\x3d\"esri-popup-con\" data-dojo-attach-point\x3d'esri_popupHeader'\x3e\r\n    \x3cdiv\x3e\x3cspan\x3e${i18n.popup.addressTitle}\x3c/span\x3e\x3c/div\x3e\r\n    \x3cp data-dojo-attach-point\x3d'_addressNode'\x3e${i18n.popup.loadingPH}\x3c/p\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv  class\x3d\"esri-popup-con\" data-dojo-attach-point\x3d'esri_popupContent'\x3e\r\n    \x3cdiv\x3e\x3cspan\x3e${i18n.popup.locationTitle}\x3c/span\x3e\x3c/div\x3e\r\n    \x3cp data-dojo-attach-point\x3d'_x'\x3e\x3c/p\x3e\r\n    \x3cp data-dojo-attach-point\x3d'_y'\x3e\x3c/p\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d\"esri-popup-button-con\"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'_matchButtonNode' data-dojo-type\x3d\"dijit.form.Button\"\x3e${i18n.popup.matchButtonLabel}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d'_discardButtonNode' data-dojo-type\x3d\"dijit.form.Button\"\x3e${i18n.popup.discardButtonLabel}\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e"}});
define("esri/dijit/GeocodeMatch/Popup","dojo/_base/array dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on dojo/uacss dojo/text!./templates/Popup.html dojo/i18n!../../nls/jsapi dijit/form/Button dijit/_WidgetBase dijit/_TemplatedMixin ../../kernel ../../geometry/webMercatorUtils ../FeatureTable/dataUtils".split(" "),function(l,e,c,m,f,n,p,q,g,r,t,u,v,h){e=e([r,t,m],{addressString:null,geocodeMatch:null,graphic:null,layer:null,map:null,templateString:p,i18n:q.widgets.geocodeMatch,reverseRange:100,
_matchButton:null,_discardButton:null,constructor:function(b,a){if(b.address)if(a=b.address,"object"===typeof a){var k="",d;for(d in a)a.hasOwnProperty(d)&&(k+=a[d]+" ");this.addressString=k}else this.addressString=a;b.reverseRange&&(this.reverseRange=b.reverseRange)},postCreate:function(){this.inherited(arguments);this._setUpButtons();this._updateXY();this._updateAddress();this.graphic.attributes.matched?(this._discardButton.destroy(),this._matchButton.destroy()):this.addressString&&(this._discardButton.destroy(),
this._matchButton.set("disabled",!1))},startup:function(){this.inherited(arguments);console.log("this:",this);this.emit("load",{matchButtonRef:this._matchButton,discardButtonRef:this._discardButton})},destroy:function(){this.inherited(arguments);l.forEach(this._listenerHandles,function(b){b.remove()})},_setUpButtons:function(){var b=this.geocodeMatch,a=this.graphic;this._matchButton=new g({label:this.i18n.popup.matchButtonLabel,"class":"esri_PopupButton esri_matchButton",disabled:!0},this._matchButtonNode);
this._discardButton=new g({label:this.i18n.popup.discardButtonLabel,"class":"esri_PopupButton esri_deleteButton"},this._discardButtonNode);this._listenerHandles=[f(this._matchButton,"click",c.hitch(this,function(){a.attributes.type===this.i18n.customLabel?b._matchCustomFeature(a):b._matchFeature(a.attributes.id);this.map.infoWindow.hide()})),f(this._discardButton,"click",c.hitch(this,function(){this.map._layers[this.layer.id].remove(a);this.map.infoWindow.hide()}))]},_updateXY:function(){var b=v.webMercatorToGeographic(this.graphic.geometry);
this._x.innerHTML=this.i18n.popup.xTitle+h.formatNumberForLocale(b.x);this._y.innerHTML=this.i18n.popup.yTitle+h.formatNumberForLocale(b.y)},_updateAddress:function(){var b=this._addressNode,a=this.geocodeMatch._locator;this.addressString?b.innerHTML=this.addressString:a.locationToAddress(this.graphic.geometry,this.reverseRange).then(c.hitch(this,function(a){a=a.address;this.graphic.attributes.reverseGeocodeResults=a;if("object"===typeof a){var d="",c;for(c in a)a.hasOwnProperty(c)&&null!==a[c]&&
"Loc_name"!==c&&(d+=a[c]+" ");b.innerHTML=d}else b.innerHTML=a;this._matchButton.set("disabled",!1)}),c.hitch(this,function(){b.innerHTML=this.i18n.popup.noAddress;this._matchButton.set("disabled",!1)}))}});n("extend-esri")&&c.setObject("dijit.GeocodeMatchPopup",e,u);return e});