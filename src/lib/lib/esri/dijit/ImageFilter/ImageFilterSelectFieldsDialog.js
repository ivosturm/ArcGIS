// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/ImageFilter/ImageFilterSelectFieldsDialog","dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/has dojo/on dojo/string dojo/i18n!../../nls/jsapi dojo/dom-construct dojo/dom-class dijit/form/CheckBox dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dgrid/OnDemandList dgrid/extensions/DijitRegistry dgrid/Selection".split(" "),function(f,b,t,u,v,w,g,e,h,k,l,m,n,p,q,r){return f([l,m,n],{templateString:'\x3cdiv\x3e\x3cdiv data-dojo-type\x3d"dijit/Dialog" data-dojo-attach-point\x3d"dialog" title\x3d"${_i18n.filterResult}"\x3e\x3cdiv\x3e${_i18n.selectFieldDescription}\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"fieldList" class\x3d"imageFilterFieldSelect"\x3e \x3c/div\x3e\x3clabel\x3e\x3cdiv data-dojo-attach-point\x3d"thumbNailCheck" data-dojo-type\x3d"dijit/form/CheckBox"\x3e\x3c/div\x3e${_i18n.thumbnails}\x3c/label\x3e\x3cdiv\x3e\x3cdiv class\x3d"esriImageFilterConfirm"\x3e\x3cbutton class\x3d"jevent primary" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:_handleOKButtonClick"\x3e${_i18n.ok}\x3c/button\x3e\x3cbutton class\x3d"jevent cancel" data-dojo-type\x3d"dijit/form/Button" data-dojo-attach-event\x3d"onClick:hide"\x3e${_i18n.cancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
widgetsInTemplate:!0,constructor:function(a,c){f.safeMixin(this,a);this._i18n=g.widgets.imageFilter.imageCardSettings;this._i18n=b.mixin(this._i18n,g.common)},show:function(){this._visibleFields=b.clone(this.imageFilter.selectedFields);this._fieldList.set("store",this.imageFilter._fieldStore);this.thumbNailCheck.set("checked",this.imageFilter.showThumbnail);this.dialog.show()},_handleOKButtonClick:function(){this.dialog.hide();0===this._visibleFields.length&&this._visibleFields.push(this.imageFilter.field.name);
this.imageFilter._updateRasterListFields({fields:this._visibleFields,showThumbnail:this.thumbNailCheck.checked})},startup:function(){this._visibleFields=b.clone(this.imageFilter.selectedFields);this._fieldList=new (f([p,q,r]))({store:this.store,bufferRows:3,selectionMode:"single",sort:"alias",renderRow:b.hitch(this,this._createFieldGrid)},this.fieldList);this._fieldList.startup();this.thumbNailCheck.set("checked",this.imageFilter.showThumbnail);this._fieldList.on(".dgrid-row:click",b.hitch(this,this._onRowClick))},
_createFieldGrid:function(a){var c=e.create("div");h.add(c,"esriImageFilterFieldSelectRow");var d=new k({checked:-1<this._visibleFields.indexOf(a.name)?!0:!1,onChange:b.hitch(this,this._updateSelectedField,a)});e.place(d.domNode,c);d=e.create("label");h.add(d,"esriImageFilterResultFieldLabel");d.innerHTML=a.alias;e.place(d,c);return c},_onRowClick:function(a){a.target.type&&"checkbox"===a.target.type||(a=this._fieldList.row(a).data,this._updateSelectedField(a))},_updateSelectedField:function(a){-1===
this._visibleFields.indexOf(a.name)?4!=this._visibleFields.length&&this._visibleFields.push(a.name):(a=this._visibleFields.indexOf(a.name),this._visibleFields.splice(a,1));this._fieldList.refresh({keepScrollPosition:!0})},hide:function(){this.dialog.hide()}})});