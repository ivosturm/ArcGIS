// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/RasterFunctionEditor/RFxColorInput","dojo/_base/declare dojo/has ../../kernel ../ColorPicker dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/popup dojo/_base/lang dojo/dom-attr dojo/on dojo/i18n!../../nls/jsapi".split(" "),function(a,l,m,n,p,q,r,f,d,h,k,t){a=a([p,q,r],{declaredClass:"esri.dijit.RasterFunctionEditor.RFxColorInput",templateString:'\x3cdiv class\x3d "esriRFxColorInput" data-dojo-attach-point \x3d "colorInput"\x3e\x3c/div\x3e',colorObject:{},
COLOR_INPUT_GRID_PREFIX:"ColorInput",postCreate:function(){this.inherited(arguments);this.setAttributes();this.colorInput.onclick=d.hitch(this,this._openColorPickerPopup)},setAttributes:function(){this.colorObject&&(h.set(this.colorInput,"style",{background:"rgba("+this.colorObject.r+", "+this.colorObject.g+", "+this.colorObject.b+","+255*this.colorObject.a+")"}),h.set(this.colorInput,"id",this.COLOR_INPUT_GRID_PREFIX+this.colorObject.id))},_openColorPickerPopup:function(b){if(!this._colorPickerOpen){b.stopPropagation();
this._colorPicker||(this._colorPicker=new n({showTransparencySlider:!0}),this._colorPicker.startup());var e=b.target,a,g;this._colorPicker.set("color",e.style.backgroundColor,!1);f.open({popup:this._colorPicker,around:e,orient:["below","above"]});this._colorPickerOpen=!0;a=k(document.body,"click",d.hitch(this,function(c){this._colorPicker.domNode.contains(c.target)||c.target===this._colorPicker.domNode||(g.remove(),a.remove(),f.close(this._colorPicker),this._colorPickerOpen=!1)}));g=k(this._colorPicker,
"color-change",d.hitch(this,function(c){a.remove();g.remove();c=c.color;var b=parseInt(e.id.replace(this.COLOR_INPUT_GRID_PREFIX,""),10);f.close(this._colorPicker);this._colorPickerOpen=!1;this._changeBackGround(c,e);this.colorObject={r:c.r,g:c.g,b:c.b,a:c.a,id:b};this.emit("change-color",this.colorObject)}))}},_changeBackGround:function(b,a){"no-color"===b?a.style.background="rgba(0,0,0,0)":(b.a=1,a.style.background="rgba("+b.r+", "+b.g+","+b.b+", 255)")}});l("extend-esri")&&d.setObject("dijit.RasterFunctionEditor.RFxColorInput",
a,m);return a});