<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
    <title></title>
    <link rel="Stylesheet" href="../css/analysis.css" />
    <script type="text/javascript">
        function init() {
            if (window.location.hash) {
                var parentDiv, nodes, i, helpInfo, helpId, helpInfoArr, helpEnvFilter, envContent, hideEnvClass, hideNodes;
                helpInfo = window.location.hash.substring(1);
                    if(helpInfo.indexOf("-")) {
                        helpInfoArr = helpInfo.split("-");
                        helpId = helpInfoArr[0];
                        helpEnvFilter = helpInfoArr[1];
                    }
                    else {
                        helpId = helpInfo;
                    }
                parentDiv = document.getElementById("topics");
                nodes = parentDiv.children;
                    hideEnvClass = (helpEnvFilter === "OnlineOnly"? "PortalOnly": "OnlineOnly");
                    if(document.getElementsByClassName) {
                        hideNodes = document.getElementsByClassName(hideEnvClass);
                    }
                    else {
                        hideNodes = document.querySelectorAll(hideEnvClass);
                    }
                for(i=0; i < nodes.length; i++) {
                    if(nodes[i].id !== helpId) {
                        nodes[i].style.display ="none";
                    }
                    }
                    for(i=0; i < hideNodes.length; i++) {
                        hideNodes[i].style.display ="none";
                    }
                }
            }
    </script>
</head>
<body onload="init()">
<div id="topics">
    <div id="toolDescription" class="largesize">
        <h2>Выявление инцидентов</h2><p/>
        <h2><img src="../images/GUID-E2A3AB39-5151-4972-A988-EBC91C41EB1F-web.png" alt="Выявление инцидентов"></h2>
        <hr/>
    <p> Этот инструмент работает со слоем с поддержкой времени, содержащим точечные, линейные, полигональный объекты или таблицы, которые представляют текущий момент времени. Используя последовательно упорядоченные объекты, называемые треками, этот инструмент определяет объекты, являющиеся интересующими вас инцидентами. Инциденты определяются по заданным вами условиям.
    </p>
    <p>Сначала инструмент определяет, какие объекты относятся к треку, используя одно или несколько полей. Используя время каждого объекта, треки последовательно упорядочиваются, затем применяется условие инцидента. Объекты, соответствующие начальным условиям инцидента, обозначаются как инциденты. Вы можете дополнительно применить конечное условия инцидента; когда оно true, объект перестает быть инцидентом.  Результаты возвращаются вместе с оригинальными объектами - с новыми столбцами с именем инцидента - и показывают, какие объекты удовлетворяют условиям инцидента. Вы можете получить все исходные объекты или только объекты-инциденты.
    </p>
    <p>Например, предположим у вас есть GPS-координаты урагана, получаемые каждые 10 минут. Каждое GPS-измерение записывает название урагана, его положение, время записи и скорость ветра. Используя эти поля, вы можете создать инцидент, когда любое измерение скорости ветра превышает 208 км/ч становится инцидентом с названием  <code>Catastrophic</code>. Если конечное условие не задано, инцидент завершается, если объект больше не удовлетворяет начальным условиям (скорость ветра становится ниже 208).
    </p>
    <p>Еще один пример: предположим, вы отслеживаете концентрацию химических соединений в локальном источнике водоснабжения и записываете значения в поле  <code>contaminateLevel</code>. Вы знаете, что рекомендованные уровни должны быть меньше 0.01 мг/л, а опасные уровни превышают 0.03 мг/л. Чтобы выявить, когда значение было выше 0.03mg/L и пометить это как инцидент, который будет оставать инцидентом, пока значение не снизится до нормы, нужно создать инцидент с начальным условием <code>contaminateLevel &gt; 0.03</code> и конечным условием <code>contaminateLevel &lt; 0.01</code>. Это позволит отметить все последовательности, где значения превосходят 0.03мг/л, пока они не вернуться к значению менее, чем 0.01.
    </p>
    </div>
    <!--Parameter divs for each param-->
    <div id="inputLayer">
        <div><h2>Выбрать слой для выявления инцидентов в</h2></div>
        <hr/>
        <div>
            <p>Точки, линии, полигоны или таблицы, которые будут использоваться для поиска инцидентов. Входным слоем должен быть слой с включенным временем, с объектами, представляющими определенный момент времени., а также содержать одно или несколько полей, которые можно использовать для идентификации треков.
            </p>
            <p>Кроме выбора слоя из вашей карты, можно щелкнуть  <b>Выбрать слой анализа</b> в нижней части ниспадающего списка, чтобы найти свои ресурсы для набора данных или векторного слоя файлового хранилища больших данных.
            </p>
        </div>
    </div>
    <div id="trackFields">
        <div><h2>Выберите одно или более полей для идентификации треков</h2></div>
        <hr/>
        <div>
            <p>Поля, представляющие идентификатор трека. Для представления уникальных значений трека можно использовать одно или несколько полей.
            </p>
            <p>Например, если вы создаете треки ураганов, в качестве поля трека можно использовать его имя.
            </p>
        </div>
    </div>
    <div id="startConditionExpression">
        <div><h2>Постройте выражение условия для обозначения начала инцидента</h2></div>
        <hr/>
        <div>
            <p>Добавьте условие, используя конструктор выражений, для определения инцидентов. Если указанное условие становится true, объект рассматривается как инцидент. Если конечное условие не задано, инцидент заканчивается, когда начальное условие перестает быть true.
            </p>
            <p>Например, предположим, вы хотите получать предупреждение, когда сумма полей  <code>concentration_1</code> и <code>concentration_2</code> становится больше значения <code>concentration_3</code>.   Для этого примените условие <code>($feature[&quot;concentration_1&quot;] +  $feature[&quot;concentration_2&quot;]) &gt; $feature[&quot;concentration_3&quot;])</code>.
            </p>
            <p>Если вам интересно, как концентрация изменялась с течением времени и хотите получать предупреждения, когда текущее значение  <code>concentration_1</code> становится больше, чем два предыдущих измерения <code>concentration_2</code>, можно использовать выражение типа <code>$feature[&quot;concentration_1&quot;] &gt;   $track.field[&quot;concentration_2&quot;].history(-3,-1)</code>.
            </p>
        </div>
    </div>
    <div id="endConditionExpression">
        <div><h2>Построить условие выражения, чтобы получить признак окончания инцидента (дополнительно)</h2></div>
        <hr/>
        <div>
            <p>Дополнительно добавьте условие, используя конструктор выражений, для определения окончания инцидента. Если конечное условие становится true, объект перестает быть инцидентом. Если конечное условие не задано, инцидент заканчивается, когда начальное условие перестает быть true.    
            </p>
            <p>Например, предположим, вы хотите получать предупреждение, когда сумма полей  <code>concentration_1</code> и <code>concentration_2</code> становится больше значения <code>concentration_3</code>, при этом инцидент должен окончиться, когда <code>concentration_4</code> становится меньше <code>concentration_1</code>. Для этого примените стартовое условие <code>($feature[&quot;concentration_1&quot;] +  $feature[&quot;concentration_2&quot;]) &gt; ($join[&quot;income&quot;] * .20)</code> и конечное условие <code>($feature[&quot;concentration_4&quot;] &lt; $feature[&quot;concentration_1&quot;])</code>.
            </p>
            <p>Если вы хотите, чтобы инцидент закончился, когда значение текущего  <code>concentration_1</code> и четырех предыдущих было больше первого измерения, можно использовать выражение типа <code>$track.field[&quot;concentration_1&quot;].history(-5) &gt; $track.field[&quot;concentration_1&quot;].history(0)</code>.
            </p>
        </div>
    </div>
    <div id="outputMode">
        <div><h2>Показать мне</h2></div>
        <hr/>
        <div>
            <p>Во всех случаях в выходных данных к исходным объектам присоединяются дополнительные поля. Если два способа возврата объектов:
                <ul>
                    <li> <b>Все объекты</b> - используется по умолчанию. Возвращаются все объекты входных данных.
                    </li>
                    <li> <b>Только инциденты</b> - возвращаются только объекты-инциденты. Объекты, не являющиеся инцидентами, не возвращаются.
                    </li>
                </ul>
                
            </p>
        </div>
    </div>
    <div id="timeBoundarySplit">
        <div><h2>Анализ данных с временными интервалами (дополнительно)</h2></div>
        <hr/>
        <div>
            <p>Укажите, хотите ли вы определять инциденты, используя временные интервалы, которые разделяют входные объекты для анализа. Если вы используете интервалы, необходимо задать его, а также, дополнительно, настроить базовое время. Если базовое время не настроено, используется 1 января 1970. 
            </p>
            <p>Например, если вы выбрали интервал в 1 день, начиная с  9:00 1 января 1990, каждый трек будет обрезан в 9:00 каждого дня и проанализирован в пределах этого сегмента. 
            </p>
            <p>Использование интервалов позволяет ускорить обработку, т.к. небольшие треки для анализа создаются быстрее. Если разбиение на повторяющиеся интервалы может влиять на результаты анализа, рекомендуется использовать обработку больших данных.
            </p>
        </div>
    </div>
    <div id="outputName">
        <div><h2>Имя слоя результата</h2></div>
        <hr/>
        <div>
            <p> Имя создаваемого слоя. Если вы записываете в ArcGIS Data Store, ваши результаты будут сохранены в  <b>Моих ресурсах</b> и добавлены на карту. Если вы записываете в файловое хранилище больших данных, ваши результаты будут сохранятся в файловом хранилище больших данных и добавляться в его файл манифеста. Они не будут добавлены на карту. Имя слоя по умолчанию зависит от имени инструмента и имени входного слоя. Если слой уже существует, произойдет сбой.
            </p>
            <p>При записи в  ArcGIS Data Store (реляционное или пространственно-временное хранилище больших данных) с помощью ниспадающего списка поля  <b>Сохранить результат в</b> вы можете задать имя папки в разделе <b>Мои ресурсы</b>, в которую будет записан результат.
            </p>
        </div>
    </div>
</div>
</html>
