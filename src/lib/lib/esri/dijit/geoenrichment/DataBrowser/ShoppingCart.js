// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/geoenrichment/DataBrowser/templates/ShoppingCart.html":'\x3cdiv class\x3d"ShoppingCart"\x3e\r\n    \x3ctable data-dojo-attach-point\x3d"label" class\x3d"Label" data-dojo-attach-event\x3d"click:_toggleList"\x3e\r\n        \x3ctr\x3e\r\n            \x3ctd class\x3d"ShoppingCart_CounterTD"\x3e\r\n                \x3cdiv class\x3d"ShoppingCart_CounterDivLeftBorder"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"divCounter" class\x3d"ShoppingCart_CounterDiv"\x3e\x3c/div\x3e\x3cdiv class\x3d"ShoppingCart_CounterDivRightBorder"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd class\x3d"ShoppingCart_LabelTd"\x3e\r\n                \x3cdiv data-dojo-attach-point\x3d"selectedVariablesLabel"\x3e\x3c/div\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd\x3e\r\n                \x3cdiv class\x3d"ShoppingCartOpener" data-dojo-attach-point\x3d"divShoppingCartOpener"\x3e\x26#x25bc;\x3c/div\x3e\r\n            \x3c/td\x3e\r\n        \x3c/tr\x3e\r\n    \x3c/table\x3e\r\n        \r\n    \x3cdiv data-dojo-attach-point\x3d"divOuter" class\x3d"ShoppingCart_OuterDiv"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"divList" class\x3d"ShoppingCart_DivList"\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"divEmpty" class\x3d"ShoppingCart_DivEmpty"\x3e\r\n            \x3cdiv\x3e${nls.noVariables}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e'}});
define("esri/dijit/geoenrichment/DataBrowser/ShoppingCart","dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on esri/dijit/geoenrichment/when dojox/mvc/Templated dgrid1/List ../../../declare ../utils/MouseUtil ../utils/TooltipUtil dojo/text!./templates/ShoppingCart.html dojo/i18n!../../../nls/jsapi ./VariableUtil ./VariableToggle".split(" "),function(g,n,f,h,p,q,r,t,u,l,v,k,w,x){k=k.geoenrichment.dijit.ShoppingCart;return t("esri.dijit.geoenrichment.ShoppingCart",q,{nls:k,templateString:v,variables:null,
selection:null,allowToggles:!0,allowMoveButtons:!1,allowEditButtons:!1,allowReplaceButtons:!1,_list:null,_content:null,_mouseOutH:null,postCreate:function(){this.inherited(arguments);var a=k.selectedVars,d=a.split(/\s+/),c=d.length-1;if(2>c)a=d.join("\x3cbr/\x3e");else{for(var a=a.length-c,b=d[0].length,e=0,f=1;f<c;f++){var l=b+d[f].length;Math.abs(2*b-a)>Math.abs(2*l-a)&&(e=f);b=l}a=d.slice(0,e+1).join("\x26nbsp;")+"\x3cbr/\x3e"+d.slice(e+1).join("\x26nbsp;")}this.selectedVariablesLabel.innerHTML=
a;this.selection=[];this._content=[];this._list=new (this._getListClass())({renderRow:g.hitch(this,this._renderVariable)},this.divList);h(this.divList,"click, touchend",g.hitch(this,this._stopPropagation));this._updateLabel();this.divOuter.style.display="none";var m=this;this.watch("selection",function(){p(m.variables.synchronize(),g.hitch(m,m._onSelectionChanged))})},_getListClass:function(){return r},_updateLabel:function(){this.divCounter.innerHTML=this._content.length.toString()},_onSelectionChanged:function(){for(var a=
[],d=Math.min(this._content.length,this.selection.length),c=0;c<d;c++){var b=this.selection[c],e=this._content[c];if(!e.hash[b])break;e.group.value=b;a.push(e)}d=this.selection.length;for(c=a.length;c<d;c++)b=this.selection[c],e={hash:{}},e.group=w.getToggleGroup(this.variables,b,e.hash),b=e.group.states&&this.allowToggles?e.group.states.ids[0]:e.group.value,b=this.variables.get(b),e.title=b&&b.alias,a.push(e);this._content=a;this._updateLabel();this._content.length||this._hideList()},_toggleList:function(a){this._stopPropagation(a);
"none"===this.divOuter.style.display?this._displayList():this._hideList()},_stopPropagation:function(a){a.stopPropagation&&a.stopPropagation()},_displayList:function(){this.refresh();this.divShoppingCartOpener.innerHTML="\x26#x25b2;";this.divOuter.style.display="";this._listenToMouseLeave()},_listenToMouseLeave:function(){this._mouseOutH&&this._mouseOutH.remove();this._mouseOutH=u.addOutHandler(this.domNode,this._onMouseLeave.bind(this))},_onMouseLeave:function(){this._mouseOutH&&this._mouseOutH.remove();
this._hideList()},_hideList:function(){this.divShoppingCartOpener.innerHTML="\x26#x25bc;";this.divOuter.style.display="none"},_renderVariable:function(a){function d(){f.create("div",{"class":"dijitInline ShoppingCartRowSpacer ShoppingCartRowFloatEnd",innerHTML:"\x26nbsp;"},c)}var c=f.create("div",{"class":"ShoppingCartRow"}),b=f.create("div",{"class":"ShoppingCartRowCloser ShoppingCartRowFloatEnd"},c);l.setTooltipToNode(b,k.removeVariable);h(b,"click",g.hitch(this,this._onRemove,a));d();a.group.states&&
this.allowToggles&&(b=new x(a.group,f.create("div",{"class":"dijitInline ShoppingCartRowFloatEnd"},c)),h(b,"change",g.hitch(this,this._onToggleChange,b,a)),d());this.allowEditButtons&&this._canEditData(a)&&(b=f.create("div",{"class":"ShoppingCartRowEditButton ShoppingCartRowFloatEnd"},c),l.setTooltipToNode(b,k.editVariable),h(b,"click",g.hitch(this,this._onEditData,a)),d());this.allowReplaceButtons&&(b=f.create("div",{"class":"ShoppingCartRowReplaceButton ShoppingCartRowFloatEnd"},c),l.setTooltipToNode(b,
k.replaceVariable),h(b,"click",g.hitch(this,this._onReplaceData,a)),d());if(this.allowMoveButtons){b=f.create("div",{"class":"dijitInline ShoppingCartRowFloatEnd upDownArrowsBlock"},c);if(0<this._content.indexOf(a)){var e=f.create("div",{"class":"dijitInline upArrow"},b);h(e,"click",g.hitch(this,this._onMove,a,!0))}this._content.indexOf(a)<this._content.length-1&&(b=f.create("div",{"class":"dijitInline downArrow"},b),h(b,"click",g.hitch(this,this._onMove,a,!1)));d()}a=this.variables.get(a.group.states&&
this.allowToggles?a.group.states.ids[0]:a.group.value);b=f.create("div",{"class":"TrimWithEllipses ShoppingCartRowLabel",innerHTML:a&&a.alias||""},c);a&&a.isMissing&&n.add(b,"ShoppingCartRowLabel_missing");return c},_onRemove:function(a){var d=this.selection.slice();a=this._content.indexOf(a);d.splice(a,1);this._content.splice(a,1);this.set("selection",d);this.refresh()},_onToggleChange:function(a,d){d.group.value=a.value;var c=this.selection.slice();c[this._content.indexOf(d)]=a.value;this.set("selection",
c)},_onMove:function(a,d){var c=this.selection.slice(),b=this._content.indexOf(a),e=c[b];c.splice(b,1);this._content.splice(b,1);c.splice(d?b-1:b+1,0,e);this._content.splice(d?b-1:b+1,0,a);this.set("selection",c);this.refresh()},_canEditData:function(a){return!1},_onEditData:function(a){},_onReplaceData:function(a){},refresh:function(){this._list.refresh();this._list.renderArray(this._content);this._updateLabel();this.divEmpty.style.visibility=this._content.length?"hidden":"visible"},isOpen:function(){return"none"!==
this.divOuter.style.display},hideList:function(){this._hideList()}})});