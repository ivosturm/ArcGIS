// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/ChartCalculator","dojo/_base/lang dojo/dom-style ./ChartTypes ../legends/ChartLegendTypes ../legends/ChartLegendPlacements ../../themes/ThemeLibrary esri/dijit/geoenrichment/utils/DomUtil".split(" "),function(B,k,u,y,l,p,z){return{PRETTY_PADDING:10,calcChartDimentions:function(a,c){var d=c.visualProps,h=c.comparisonInfo,b=c.chartType,e=c.maxIconSize,f=c.numPoints;c=d.width;var g=d.height,v=0,A=0,p=0,m,q,n,w,C=!z.isHidden(a.chartLabel),
r=0;u.isColumnLike(b)&&!d.xAxis.show&&d.showAxisIcons&&(g+=30);C&&(r=k.get(a.chartLabel,"height")+(d.title.verticalShift||0),g-=r);d.showAxisIcons&&(u.isColumnLike(b)?g-=Math.min(e,(c-100)/f*.8)+10:u.isBarLike(b)&&(e=Math.min(e,(g-50)/f*.8)+10,v+=e,c-=e));var d=d.legend||{},f=d[d.type===y.MIN_MAX?"minMax":"series"]||{},e=f.placement||l.NONE,f=(f.placementOffset||0)/100,t=e===l.LEFT||e===l.RIGHT,E=a.comparisonSelectBlock&&a.comparisonSelectBlock.offsetWidth+20,D=a.comparisonSelectBlock&&a.comparisonSelectBlock.offsetHeight+
20;!h||!u.isComparisonSupported(b)||d.type===y.MIN_MAX&&t||(g-=D);t||k.set(a.getLegendNode(),{width:c-20+"px"});b=a.legend&&z.noTransformPosition(a.legend.domNode);b=B.mixin({w:0,h:0},b);t||k.set(a.getLegendNode(),{width:""});var x=t?g-48:0;b.h=x?Math.min(b.h,x):b.h;b.h+=20;d.type===y.MIN_MAX&&t&&(b.w=Math.max(b.w,E));switch(e){case l.LEFT:m=10;q=r+g*f;v+=2*m+b.w;c-=v;break;case l.RIGHT:n=10;q=r+g*f;A+=2*n+b.w;c-=A;break;case l.TOP:g-=b.h;q=C?r+10:10;n=m=10;p+=b.h;break;case l.BOTTOM:g-=b.h,w=n=m=
10,h&&(w+=D-10)}k.set(a.chartLabel,{marginLeft:"10px",marginRight:"10px"});k.set(a.chartContainerWithAxis,{marginTop:p+"px",marginLeft:v+"px",marginRight:A+"px"});a.legend&&k.set(a.legend.domNode,{maxHeight:x?x+"px":""});k.set(a.getLegendNode(),{left:void 0!==m?m+"px":"",right:void 0!==n?n+"px":"",top:void 0!==q?q+"px":"",bottom:void 0!==w?w+"px":""});return{w:c,h:g}},calcAxisLabelsAutoTilt:function(a,c,d,h){if(!c||!c.length||0!==d.xAxis.labelsAngle)return!1;var b=!1,e=(a-50)/c[0].data.length-20;
a=B.mixin({},h.xAxis.axisStyle,h.xAxis.style,d.xAxis.style);var f=z.getMeasureContext({style:"font-size:"+(a.fontSize||p.CHART_DATA_FONT_SIZE-1)+"px;font-family:"+(a.fontFamily||p.DEFAULT_FONT_FAMILY_GRAPHIC)});c[0].data.some(function(a){return f.measureText(a.name).w>e})&&(b=20);f.destroy();return b},resizeVisualProperties:function(a,c,d){var h=a.width,b=a.height;a.width=c;a.height=d;a.floatingTexts&&a.floatingTexts.forEach(function(a){a.style.left*=c/h;a.style.top*=d/b});a.floatingIcons&&a.floatingIcons.forEach(function(a){a.style.left*=
c/h;a.style.top*=d/b})}}});