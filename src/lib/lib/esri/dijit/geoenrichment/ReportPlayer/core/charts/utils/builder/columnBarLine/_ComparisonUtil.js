// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/builder/columnBarLine/_ComparisonUtil",["dojo/_base/lang","../../ChartTypes","../ChartPlots","../../ChartFilterUtil"],function(k,f,l,h){return{getComparisonPlotName:function(a,b){return b&&b.chartType===f.LINE&&!f.isLineLike(a)?l.SECONDARY:null},isComparisonInPrimaryPlot:function(a,b){return!this.getComparisonPlotName(a,b)},getEffectiveNumberOfSeries:function(a,b,d,e,c){function g(){return c?a.filter(function(a){return!c[a.label]}).length:
a.length}return this.canShowComparison(d,a,e)?e?g():this.isComparisonInPrimaryPlot(b,d)?2*g():g():g()},canShowComparison:function(a,b,d){return a&&(d||1===b.length||2===b.length)},updateSeriesItemsForComparisonInfo:function(a){if(this.canShowComparison(a.comparisonInfo,a.seriesItems,a.isMultiFeatureChart))if(a.isMultiFeatureChart)if(f.isLineLike(a.chartType)){var b=a.seriesItems.slice(),d=h.getFirstSeriesItem(a.seriesItems)||a.seriesItems[0];a.comparisonFeatureAttributes.forEach(function(a){b.push({isComparisonSeries:!0,
label:a.StdGeographyName,points:d.points.map(function(c){return{label:c.label,value:{value:a[c.fieldInfo.name]||0}}})})});a.seriesItemsWithComparison=b}else{var e=a.seriesItems.map(function(a){a=k.mixin({},a);a.points=a.points.slice();return a});a.comparisonFeatureAttributes.forEach(function(a){e.forEach(function(b){var c=h.getFirstSeriesPoint(b)||b.points[0];b.points.push({label:a.StdGeographyName,color:c.color,value:{value:a[c.fieldInfo.name]||0}})})});a.seriesItems=e;delete a.comparisonInfo}else b=
[],a.seriesItems.forEach(function(c,d){b.push(c);if(f.isLineLike(a.chartType))if(d===a.seriesItems.length-1)c={isComparisonSeries:!0,label:a.comparisonFeatureAttributes[0].StdGeographyName,points:c.points.slice()};else return;else c={isComparisonSeries:!0,label:a.comparisonFeatureAttributes[0].StdGeographyName+(1<a.seriesItems.length?" ("+c.label+")":""),points:c.points.slice()};b.push(c)}),a.seriesItemsWithComparison=b}}});