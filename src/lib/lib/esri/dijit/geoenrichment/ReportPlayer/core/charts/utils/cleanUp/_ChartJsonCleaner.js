// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/cleanUp/_ChartJsonCleaner",["../ChartTypes","../../legends/ChartLegendTypes","../../legends/ChartLegendPlacements","./_ChartTypeSupports","../../../supportClasses/templateJsonUtils/fieldInfo/FieldInfoBuilder"],function(d,m,n,k,l){return{cleanUpJson:function(b,p,g){var e=b.type,f=b.isMultiFeatureChart,c=b.seriesItems.length,a=b.visualProperties;g=g&&g.isBenchmarked;d.isSingleSeries(e)&&1<c&&(c=b.seriesItems.length=1);d.hasBackgroundImage(e)||
delete a.backgroundImageData;d.isConditionalStylingSupported(e)||delete a.conditionalStyling;d.isSortingSupported(e,c,f)||delete a.sorting;d.canFilterVariables(e,f)||delete a.filter;d.isComparisonSupported(e,f)<c&&delete b.comparisonInfo;2===c&&b.comparisonInfo&&(a.showColumnBarBackground=!1,a.isStacked=!1,a.showValuesAsWeightInStack=!1);f&&b.comparisonInfo&&(b.comparisonInfo.chartType=e);a.legend&&a.legend.series&&a.legend.type===m.SERIES&&!d.isSeriesLegendSupported(e,c,f,!!b.comparisonInfo&&a.legend.series.showComparison)&&
(a.legend.series.placement=n.NONE);d.isRenderInOppositeDirectionsSupported(e,c,f)||delete a.renderColumnBarsInOppositeDirections;d.isStackSupported(e,c,f)||(a.isStacked=!1,a.showValuesAsWeightInStack=!1);a.renderColumnBarsInOppositeDirections&&a.isStacked&&(a.renderColumnBarsInOppositeDirections=!0,a.isStacked=!1,a.showValuesAsWeightInStack=!1);a.isStacked||(a.showValuesAsWeightInStack=!1);if(a.yAxis){if(a.isStacked||a.renderColumnBarsInOppositeDirections)a.yAxis.baseLineValue=0;d.isShowDataAsWeightSupported(e)&&
!a.showValuesAsWeightInStack||delete a.yAxis.showValuesAsWeightsInSeries}d.isPictureLike(e)?b.seriesItems.forEach(function(a){a.points&&a.points.forEach(function(a){delete a.color})}):b.seriesItems.forEach(function(a){a.points&&a.points.forEach(function(a){delete a.iconFieldInfo})});d.isSingleSeries(e)&&b.seriesItems.forEach(function(a){delete a.color});d.isLineLike(e)&&b.seriesItems.forEach(function(a){f?(delete a.color,delete a.lineThickness,delete a.lineStyle,delete a.lineMarker,delete a.lineMarkerColor,
delete a.lineMarkerFillColor,delete a.lineMarkerSize):delete a.multiFeatureLineStyles});if(e===d.GAUGE){if((c=b.seriesItems[0]&&b.seriesItems[0].points&&b.seriesItems[0].points)&&c.length){c.length=Math.min(2,c.length);c[1]&&delete c[1].fieldInfo;var h=c[0].fieldInfo;h&&l.isFieldInfoInPercentState(h)&&(delete a.gaugeRangeMin,delete a.gaugeRangeMax)}90<a.gaugeArcPercent&&(a.gaugeShowFromToLabels=!1)}e===d.WAFFLE&&(c=b.seriesItems[0]&&b.seriesItems[0].points&&b.seriesItems[0].points)&&c.length&&(1<
c.length&&delete c[c.length-1].fieldInfo,(h=c[0].fieldInfo)&&l.isFieldInfoInPercentState(h)&&(delete a.waffleRangeMin,delete a.waffleRangeMax),1<c.length&&delete c[c.length-1].fieldInfo,2<c.length?delete a.waffleRangeMin:delete a.legend);b=k.cleanUpJsonForChartType(b,p);g&&(a=b.visualProperties,a.renderColumnBarsInOppositeDirections=!1,a.isStacked=!1,a.showValuesAsWeightInStack=!1,a.yAxis&&a.yAxis.showValuesAsWeightsInSeries&&(delete a.yAxis.showValuesAsWeightsInSeries,delete a.yAxis.showPercentSymbol));
return b},supportsVisualProperty:function(b,d,g){return k.supportsVisualProperty(b,d,g)}}});