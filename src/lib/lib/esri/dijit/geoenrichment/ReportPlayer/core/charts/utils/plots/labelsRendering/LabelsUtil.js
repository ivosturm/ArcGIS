// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/charts/utils/plots/labelsRendering/LabelsUtil",["dojo/_base/lang","dojox/gfx","dojox/charting/plot2d/common"],function(r,q,t){var m={getLabelInfo:function(a,d,b,e){function n(a,c){return{font:a.isLabel&&b.series.dataLabelsLabelFont||a.isPercent&&b.series.dataLabelsPercentFont||b.series.dataLabelsFont,fontColor:c&&b.series.dataLabelsAltColor||a.isLabel&&b.series.dataLabelsLabelColor||a.isPercent&&b.series.dataLabelsPercentColor||b.series.dataLabelsColor}}
function g(a){a=r.mixin(a||{},e);var c={x:0,y:0,w:0,h:0},d="";h.forEach(function(b,f){var e=q._base._getTextBox(b.text,{font:n(b).font}),k=e.w,g=e.h,p=0;if(a.forceOneLine)0<f&&f===h.length-1&&(p=a.spaceToWidth?Math.max(0,a.spaceToWidth-c.w-k):a.minSpace||0),c.w+=k+p,c.h=Math.max(c.h,g);else{var l=b.isLabel&&a.dataLabelsMaxWidth||void 0;l&&l>=k&&(l=void 0);k=l?Math.min(k,l):k;l&&(g*=Math.ceil(e.w/k));c.w=Math.max(c.w,k);c.h+=g}e=n(b,a.isAltPosition);0<f&&!a.forceOneLine&&(d+="\x3cbr/\x3e");d+=m.getStyledLabel({w:k,
h:g,font:e.font,fontColor:e.fontColor,text:b.text,forceOneLine:a.forceOneLine,spaceBefore:p,isInlineBlock:!0,maxWidth:l})});var f="";"number"===typeof b.series.dataLabelsAngle&&0!==b.series.dataLabelsAngle&&(f="transform:rotate("+-b.series.dataLabelsAngle+"deg);");d="\x3cdiv style\x3d'font-size: 0px;text-align:"+(a.horizontalAlign||"left")+";"+(a.forceOneLine?"white-space:nowrap;":"")+f+"width:"+c.w+"px;height:"+c.h+"px;'\x3e"+d+"\x3c/div\x3e";delete c.l;delete c.t;!a.considerAngle||90!==b.series.dataLabelsAngle&&
-90!==b.series.dataLabelsAngle||(c={w:c.h,h:c.w+4});return{text:d,box:c}}var h=a.opt.labelFunc?a.opt.labelFunc.apply(a,[d,a.opt.fixed,a.opt.precision]):d.text||t.getLabel(d[d.valueProp],a.opt.fixed,a.opt.precision)||"",h="string"===typeof h?[{text:h}]:h;return{getText:function(a){return g(a).text},box:g().box,angle:e.considerAngle&&b.series.dataLabelsAngle}},getSimpleLabelInfo:function(a){var d=a.font.replace(/\s\w*px/," "+Math.round(a.fontSize)+"px"),b=q._base._getTextBox(a.text,{font:d});return{text:m.getStyledLabel({text:a.text,
font:d,fontColor:a.fontColor,w:b.w,h:b.h}),box:b}},getStyledLabel:function(a){var d=a.fontSize?a.font.replace(/\s\w*px/," "+Math.round(a.fontSize)+"px"):a.font;return"\x3cdiv style\x3d'"+(a.maxWidth?"max-width:"+a.maxWidth+"px;white-space:normal;":"white-space:nowrap;")+"width:"+Math.round(a.w)+"px;height:"+Math.round(a.h)+"px;font:"+d+";color:"+a.fontColor+";"+(a.textDecoration?"text-decoration:"+a.textDecoration+";text-decoration-color:"+a.fontColor+";":"")+(a.forceOneLine?"vertical-align:bottom;":
"")+(a.spaceBefore?"padding-left:"+Math.round(a.spaceBefore)+"px;":"")+(a.isInlineBlock||a.forceOneLine?"display:inline-block;":"")+"'\x3e"+String(a.text).replace(/\s/g," ")+"\x3c/div\x3e"},renderHTMLLabel:function(a,d,b,e,n,g,h){var f=document.createElement("div"),c=f.style;f.innerHTML=e;c.position="absolute";var m=e=0;if(90===h||-90===h)e=-(g-4-n)/2,m=-(n-(g-4))/2;c.left=Math.floor(d+e)+"px";c.top=Math.floor(b+m)+"px";c.pointerEvents="none";a.node.insertBefore(f,a.node.firstChild);return f}};return m});