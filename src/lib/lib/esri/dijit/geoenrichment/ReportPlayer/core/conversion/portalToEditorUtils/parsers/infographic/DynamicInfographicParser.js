// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/conversion/portalToEditorUtils/parsers/infographic/DynamicInfographicParser",["../../../ConversionUtil","esri/dijit/geoenrichment/ReportPlayer/core/infographics/InfographicTypes","../../../../infographics/utils/InfographicJsonUtil","../_FieldInfoBuilder","esri/dijit/geoenrichment/utils/JsonXmlConverter"],function(b,h,k,f,l){return{portalToEditor:function(a,e){var g=a.attributes.name,d=e.templateJson.metadata.comparisonCalculatorsHash[g],c={type:h.fixTapestryNameToWidget(a.attributes.type),
title:a.attributes.title||"",style:{width:b.ptToPx(a.attributes.width),height:b.ptToPx(a.attributes.height),padding:a.attributes.padding?b.ptToPx(a.attributes.padding):void 0,backgroundColor:a.attributes.backgroundColor,titleStyle:a.attributes.titleStyle&&b.ptToPxObj(b.parseStyleString(a.attributes.titleStyle)),tableBackgroundColor:a.attributes.tableBackgroundColor,tableBorderColor:a.attributes.tableBorderColor,textStyle:a.attributes.textStyle&&b.ptToPxObj(b.parseStyleString(a.attributes.textStyle)),
subtextStyle:a.attributes.subtextStyle&&b.ptToPxObj(b.parseStyleString(a.attributes.subtextStyle)),hyperlinkTextStyle:a.attributes.hyperlinkTextStyle&&b.ptToPxObj(b.parseStyleString(a.attributes.hyperlinkTextStyle)),detailsValueBorderColor:a.attributes.detailsValueBorderColor},showVerticalAxis:a.attributes.showVerticalAxis};if(d){d.levels&&k.setLevels(c,d.levels);a=l.queryJson(a,"d");c.fieldInfos=a.length?a.map(function(a){return f.getCalculatorOrScriptFieldInfo(a.attributes.f,e,{format:a.attributes.m})}):
d.variableObjects.map(function(a){return f.getCalculatorOrScriptFieldInfo(a.templateName,e)});if(c.fieldInfos.some(function(a){return a.isMissing}))return null;c.calcData={calculatorName:g,variables:c.fieldInfos.map(function(a){return a.fullName})}}else c.variables=a.attributes.dataCollectionID?[a.attributes.dataCollectionID+".*"]:[a.attributes.variableID];return c}}});