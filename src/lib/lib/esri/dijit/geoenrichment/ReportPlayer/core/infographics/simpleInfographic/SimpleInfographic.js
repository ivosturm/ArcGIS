// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
require({cache:{"url:esri/dijit/geoenrichment/ReportPlayer/core/templates/SimpleInfographic.html":'\x3cdiv class\x3d"esriGESimpleInfographic"\x3e\r\n    \r\n    \x3cdiv data-dojo-attach-point\x3d"mainViewDiv" class\x3d"esriGEAbsoluteStretched"\x3e\x3c/div\x3e\r\n\r\n    \x3cdiv data-dojo-attach-point\x3d"dataDrillingViewDiv" class\x3d"simpleInfographic_dataDrillingViewDiv esriGEReportPlayer"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"drilledDataViewDiv" class\x3d"simpleInfographic_drilledDataViewDiv esriGEAbsoluteStretched"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"drilledDataViewDivScaler"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"topToolbar" class\x3d"simpleInfographic_topToolbar"\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"dynamicSettingsToolbarRoot" class\x3d"dijitInline simpleInfographic_dynamicSettingsToolbarRoot"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"drillingOptionsButton" class\x3d"dijitInline simpleInfographic_drillingOptionsButton"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"exportButton" class\x3d"dijitInline simpleInfographic_exportButton"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"printButton" class\x3d"dijitInline simpleInfographic_printButton"\x3e\x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"backToMainViewButton" class\x3d"dijitInline simpleInfographic_backToMainViewButton"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n    \x3c/div\x3e\r\n\r\n\x3c/div\x3e\r\n\r\n\r\n'}});
define("esri/dijit/geoenrichment/ReportPlayer/core/infographics/simpleInfographic/SimpleInfographic","dojo/_base/declare dojo/_base/lang esri/dijit/geoenrichment/when dojo/dom-construct dojo/dom-style dijit/_WidgetBase dijit/_TemplatedMixin ../utils/InfographicLayoutResizer ../utils/InfographicJsonConversionUtil ../utils/InfographicThemeUtil ../../supportClasses/tableJson/TableJsonUtil ../../sections/supportClasses/InfographicBenchmarkController ../../sections/supportClasses/InfographicValueController esri/dijit/geoenrichment/ReportPlayer/core/sections/SectionTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ElementUsageTypes esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/ViewModes esri/dijit/geoenrichment/utils/InvokeUtil esri/dijit/geoenrichment/utils/ObjectUtil dojo/text!../../templates/SimpleInfographic.html".split(" "),
function(r,n,t,u,l,v,w,x,y,z,g,A,B,C,h,p,d,e,D){function q(a){return a&&a.shape&&a.shape.shapeJson.showAsBar}return r([v,w],{templateString:D,viewModel:null,theme:null,parentWidget:null,currentFeatureIndex:null,getPreviewValueFunction:null,isEditMode:!1,adjustElementsWhenResized:!1,_sections:null,_currentInfographicJson:null,_updatePromise:null,updateInfographic:function(a){if(this.domNode)if(this._currentInfographicJson=this._applyThemeToJson(a),this.isEditMode)this._doUpdateInfographic();else return this.onContentLoadingStart(),
this._updatePromise=d.invoke(this,"_doUpdateInfographic",50),this.onShowWaiting(this._updatePromise),this._updatePromise["finally"](function(){this.onContentLoadingEnd()}.bind(this)),this._updatePromise},refresh:function(){this.updateInfographic(this._currentInfographicJson)},_doUpdateInfographic:function(){if(this.domNode){this._destroySections();var a=this._currentInfographicJson;this._syncJsonDimensions();var c=this.viewModel.getStaticInfographicDefaultStyles(this.theme);l.set(this.domNode,"backgroundColor",
a.style.backgroundColor||c&&c.backgroundColor);l.set(this.domNode,{width:a.style.width+"px",height:a.style.height+"px"});this._preRender();this._renderHeader();this._renderVariableTables();this._postRender()}},_infographicValueController:null,_preRender:function(){this._infographicValueController=new B;var a=this._currentInfographicJson.variableTables.filter(q);this._infographicValueController.setVariableTables(a)},_renderHeader:function(){if(this._currentInfographicJson.header){var a=this._currentInfographicJson.header;
this._createSection(g.getTableWidth(a),g.getTableHeight(a),[a],a.style,null,-1,null)}},_renderVariableTables:function(){this._currentInfographicJson.variableTables.forEach(function(a){this._renderVariableTable(a)},this)},_renderVariableTable:function(a){var c=y.variableTableToNormalTables(a);return this._createSection(a.style.width,a.style.height,c.tableJsons,a.style,a,this._currentInfographicJson.variableTables.indexOf(a),c)},_createSection:function(a,c,g,d,m,e,f){var k=-1===e,b={};b.initialWidth=
a;b.initialHeight=c;b.json={type:C.DETAILS,stack:g};b.viewModel=this.viewModel;b.theme=this.theme;b.parentWidget=this;b.currentFeatureIndex=this.currentFeatureIndex;b.initialViewMode=this.isEditMode&&!this.getPreviewValueFunction?p.EDIT:p.PREVIEW_VALUES;b.elementUsageType=k?h.INFOGRAPHIC_HEADER_SECTION:h.INFOGRAPHIC_SECTION;b.getPreviewValueFunction=this.getPreviewValueFunction;b.infographicValueController=q(m)&&this._infographicValueController;f&&this.viewModel.isBenchmarkedArea&&this.viewModel.isBenchmarkedArea(this.currentFeatureIndex)&&
(a=new A,a.isVariableInShape=f.isVariableInShape,a.iconTableIndex=f.iconIndex,a.descTableIndex=f.descriptionIndex,a.backgroundColor=this.domNode.style.backgroundColor,b.infographicBenchmarkController=a);this.viewModel.dynamicReportInfo&&(b.tableParams={enableNumberAnimation:!0,allowSorting:!1});n.mixin(b,this._prepareSectionCreationParams(m,k));b=this.viewModel.layoutBuilder.createElement("section",b,this.mainViewDiv);l.set(b.domNode,{position:"absolute",left:(k?0:d.left||0)+"px",top:(k?0:d.top||
0)+"px"});b._variableTableParams={variableTable:m,variableTableIndex:e,elementsIndexHash:f};this._sections.push(b);return b},_prepareSectionCreationParams:function(a,c){return null},_postRender:function(){},getHeaderTable:function(){var a=this.getHeaderSection();return a&&a.getTables()[0]},getSectionIconTable:function(a){return a.getTables()[a._variableTableParams.elementsIndexHash.iconIndex]},getSectionVariableTable:function(a){return a.getTables()[a._variableTableParams.elementsIndexHash.variableIndex]},
getSectionDescriptionTable:function(a){return a.getTables()[a._variableTableParams.elementsIndexHash.descriptionIndex]},getHeaderSection:function(){return this._sections.filter(function(a){return a.elementUsageType===h.INFOGRAPHIC_HEADER_SECTION})[0]},getVariableSections:function(){return this._sections.filter(function(a){return a.elementUsageType===h.INFOGRAPHIC_SECTION})},getVisualState:function(){return null},setVisualState:function(a){},_applyThemeToJson:function(a){var c=this.viewModel.getStaticInfographicDefaultStyles(this.theme);
return z.applyThemeSettingsToJson(a,c)},notifyShown:function(){t(this._updatePromise,function(){this._sections&&this._sections.forEach(function(a){a.notifyShown()})}.bind(this))},width:null,height:null,resize:function(a,c){void 0!==a&&(this.width=a,this.height=c);if(this.isEditMode)this._checkNeedResize()&&this._doUpdateInfographic();else return this._checkNeedResize()&&d.invoke(this,"_doUpdateInfographic",50)},_checkNeedResize:function(){return this._currentInfographicJson&&this.width&&this.height&&
(!e.compareEqual(this._currentInfographicJson.style.width,this.width,1)||!e.compareEqual(this._currentInfographicJson.style.height,this.height,1))},_syncJsonDimensions:function(){this._checkNeedResize()&&x.resizeLayout(this._currentInfographicJson,this.width,this.height,{preserveHeaderPosition:!0,allowResizeInnerElements:!0,ignoreMinMaxConstraints:this.adjustElementsWhenResized,updateFontSize:this.adjustElementsWhenResized&&!this._currentInfographicJson.preserveTextSize})},toJson:function(){return n.clone(this._currentInfographicJson)},
onContentLoadingStart:function(){},onContentLoadingEnd:function(){},onShowWaiting:function(a){},_destroySections:function(){this._sections=this._sections||[];this._sections.forEach(function(a){a.destroy()});this._sections.length=0;this.domNode&&u.empty(this.mainViewDiv)},destroy:function(){this._destroySections();this.inherited(arguments)}})});