// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/core/supportClasses/map/layers/std/StdPolygonsBuilder",["./DefaultSymbolRenderer","./LoadedFeaturesSyncronizer","../../symbols/HighlightedSymbolGenerator","esri/dijit/geoenrichment/utils/SymbolUtil"],function(f,k,l,m){var h={addStdPolygons:function(a,g){a.stdPolygonsControllers&&a.stdPolygonsControllers.forEach(function(e){var b=new k({controller:e,layerSorter:g,map:a.map,countryID:a.countryID,hierarchy:a.hierarchy,calculatorFieldName:a.calculatorFieldName,
onLayerCreated:function(b,c){h._registerLayer(b,c,a.map,e,a)}}),c=[];c.push(e.setShownFeaturesChangedListener(function(){b.syncWithShownFeatures()}));c.push(e.setLoadAllFeaturesListener(function(){return b.loadAllFeatures()}));b.syncWithShownFeatures();var d=a.map.on("before-unload",function(){d.remove();c.forEach(function(a){a.remove()});c.length=0;b.destroy();b=null})})},_registerLayer:function(a,g,e,b,c){var d=b.getRendererJson(c.calculatorFieldName);l.getHighlightSymbol({graphicsLayer:a,rendererJson:d,
defaultHighlightSymbol:f.getDefaultStdSymbolHighlighted()}).then(function(d){var f=d.symbol;m.simpleFillSymbolToPictureFillSymbol(f).then(function(d){b.setStdPolygonsLayer(c.calculatorFieldName+";"+g,a,e,{getGraphicForAttributesFunc:function(b){return b&&"object"===typeof b&&a.graphics.filter(function(a){return a.attributes.StdGeographyLevel===b.StdGeographyLevel&&a.attributes.StdGeographyID===b.StdGeographyID})[0]},setGraphicHighlightedFunc:function(a,b){a.setSymbol(b?d||f:null)}})})})},getDefaultStdRenderer:function(){return f.getDefaultStdRenderer()}};
return h});