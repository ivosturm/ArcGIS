// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/ReportPlayer/dataProvider/supportClasses/attachments/AttachmentsStoreSerializer",["esri/dijit/geoenrichment/when","esri/dijit/geoenrichment/promise/all","./AttributesUtil","./NotesUtil","./CustomAttachmentsStore"],function(h,d,l,m,b){return{getAttachmentsStoreJson:function(a,b){function k(){return d([a.getAttachments(),a.getAttributes(),a.getNotes()]).then(function(a){var b=a[0]||[],n=a[1]||[],c=a[2]||[];return d(b.map(function(a){return d([a.getThumbnail(),a.getAttachmentUrl()]).then(function(e){a.__thumbnail=
e[0];a.__url=e[1]})})).then(function(){return{attachments:b.map(function(a){var b=a.__thumbnail,e=a.__url;delete a.__thumbnail;delete a.__url;return{description:a.description,thumbnail:b,url:e}}),attributes:n.map(function(a){return l.attributeToJson(a)}),notes:c.map(function(a){return m.noteToJson(a)})}})})}if(!a)return null;var c=[],f=[];if(a.supportsMultipleAreas)for(var g=0;g<b;g++)a.setCurrentAnalysisAreaIndex(g),f.push(h(k(),function(a){c.push(a)}));else f.push(h(k(),function(a){c.push(a)}));
return d(f).then(function(){return{supportsMultipleAreas:a.supportsMultipleAreas,areaAttachements:c}})},getAttachmentsStoreFromJson:function(a){return a||a.areaAttachements?new b(a.areaAttachements?a:{areaAttachements:[a]}):null}}});