// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/PositionUtil",["dojo/_base/lang","./FitUtil"],function(r,l){var m={},q="before-centered before after-centered after above above-centered above-alt below below-centered below-alt".split(" ");m.POSITIONS=q;m.getBestPositionBigAroundSmall=function(a,b,c){function d(d){function g(a,c){return m.checkFitsInView({x:a,y:c,w:b.w,h:b.h},{viewPortOffset:l})}function n(a,b){var c=g(a[0],b[0]);if(c.totalAdjust){var d=g(a[1],b[1]);k=d.totalAdjust?c.totalAdjust<d.totalAdjust?
c:d:d}else k=c;k===c?(f=a[0],e=b[0]):(f=a[1],e=b[1])}var f,e,k;switch(d){case "before-centered":f=a.x-b.w-h;e=a.y-(b.h-a.h)/2;break;case "before":f=a.x-b.w-h;n([f,f],[a.y,a.y+a.h-b.h]);break;case "after-centered":f=a.x+a.w+h;e=a.y-(b.h-a.h)/2;break;case "after":f=a.x+a.w+h;n([f,f],[a.y,a.y+a.h-b.h]);break;case "above":e=a.y-b.h-h;n([a.x,a.x+a.w-b.w],[e,e]);break;case "above-centered":f=a.x-(b.w-a.w)/2;e=a.y-b.h-h;break;case "above-alt":e=a.y-b.h-h;n([a.x+a.w-b.w,a.x],[e,e]);break;case "below":e=a.y+
a.h+h;n([a.x,a.x+a.w-b.w],[e,e]);break;case "below-centered":f=a.x-(b.w-a.w)/2;e=a.y+a.h+h;break;case "below-alt":e=a.y+a.h+h,n([a.x+a.w-b.w,a.x],[e,e])}k=k||g(f,e);return!k.fits&&c.useStrictFit?null:{x:f+k.adjustX,y:e+k.adjustY,totalAdjust:k.totalAdjust,position:d}}c=c||{};var h=c.offset||0,l=c.viewPortOffset||0,g;c.orient&&c.orient.some(function(a){if((a=d(a))&&!a.totalAdjust)return g=a,!0});if(g)return g;var p=[];q.some(function(a){if((g=d(a))&&!g.totalAdjust)return!0;g&&(p.push(g),g=null)});if(g)return g;
p.sort(function(a,b){return a.totalAdjust-b.totalAdjust});return p[0]};m.checkFitsInView=function(a,b){b=b&&b.viewPortOffset||0;var c=0,d=0;a.x<b?c=-a.x+b:a.x+a.w>document.body.clientWidth-b&&(c=document.body.clientWidth-b-(a.x+a.w));a.y<b?d=-a.y+b:a.y+a.h>document.body.clientHeight-b&&(d=document.body.clientHeight-b-(a.y+a.h));return{fits:0===c&&0===d,adjustX:c,adjustY:d,totalAdjust:Math.abs(c)+Math.abs(d)}};m.findBestAllowedSizeBigAroundBox=function(a,b,c){a=r.mixin({},a);c=c||{};var d=c.offset||
0;c=c.viewPortOffset||0;a.x-=c+d;a.y-=c+d;a.w+=2*d;a.h+=2*d;d=document.body.clientWidth-2*c;c=document.body.clientHeight-2*c;a=[l.fitBox(b,{w:a.x,h:c}),l.fitBox(b,{w:d-a.x-a.w,h:c}),l.fitBox(b,{w:d,h:a.y}),l.fitBox(b,{w:d,h:c-a.y-a.h})];a.sort(function(a,b){return a.ratio<b.ratio?1:-1});return a[0]};return m});