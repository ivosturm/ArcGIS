// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/dijit/geoenrichment/utils/progress/SmoothProgress",["dojo/_base/declare","dojo/aspect"],function(c,d){return c(null,{elasticTime:1E3,fireInterval:30,_intervalHandle:null,_progressHandle:null,_realProgress:0,_smoothProgress:0,_runAheadSpeed:2.5E-4,_currentSpeed:0,constructor:function(a){0<a.fireInterval&&(this.fireInterval=a.fireInterval);0<a.elasticTime&&(this.elasticTime=a.elasticTime);0<a.timeEstimate&&(this._runAheadSpeed=Math.min(this.fireInterval/a.timeEstimate,.5));var b=this;this._progressHandle=
d.after(a,"onChange",function(a){1<=a?b._finalize():b._updateProgress(a)},!0)},start:function(){this._updateProgress(0,!0)},_updateProgress:function(a,b){this._realProgress=Math.max(a,0);if(0===this._realProgress&&(this._smoothProgress=0,this._setIntervalHandle(!1),this.onChange(0),!b))return;this._setIntervalHandle(!0);this._currentSpeed=this._smoothProgress>=this._realProgress?this._runAheadSpeed:(this._realProgress-this._smoothProgress)*this.fireInterval/this.elasticTime},_setIntervalHandle:function(a){a!==
!!this._intervalHandle&&(a?this._intervalHandle=setInterval(this._tryFireProgress.bind(this),this.fireInterval):(clearInterval(this._intervalHandle),this._intervalHandle=null))},_tryFireProgress:function(){0!==this._currentSpeed&&(this._smoothProgress+=this._currentSpeed,this._smoothProgress=Math.min(1-this._runAheadSpeed,this._smoothProgress),this._smoothProgress>=this._realProgress&&(this._currentSpeed=this._runAheadSpeed),this.onChange(this._smoothProgress))},_finalize:function(){this._smoothProgress=
this._realProgress=1;this.onChange(1)},onChange:function(a){},destroy:function(){this._progressHandle.remove();this._setIntervalHandle(!1)}})});