// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/layers/vectorTiles/views/2d/engine/webgl/DirtyMap",["require","exports","./Utils"],function(h,k,m){function l(a,e,d){a.allDirty||(null!=a.from&&null!=a.count?(a.from=Math.min(a.from,e),a.count=Math.max(a.from+a.count,e+d)-a.from):(a.from=e,a.count=d))}Object.defineProperty(k,"__esModule",{value:!0});h=function(){function a(){this._dirties=m.createGeometryData(void 0,function(e){return{indices:{from:null,count:null,allDirty:!1}}},function(e,a){return{vertices:{from:null,count:null,allDirty:!1}}})}
a.prototype.markAllClean=function(){for(var a=0,d=this._dirties;a<d.length;a++){var b=d[a];b.data.indices.from=null;b.data.indices.count=null;b.data.indices.allDirty=!1;for(var c in b.buffers)b.buffers[c].data.vertices.from=null,b.buffers[c].data.vertices.count=null,b.buffers[c].data.vertices.allDirty=!1}};a.prototype.markAllDirty=function(){for(var a=0,d=this._dirties;a<d.length;a++){var b=d[a];b.data.indices.allDirty=!0;for(var c in b.buffers)b.buffers[c].data.vertices.allDirty=!0}};a.prototype.forEach=
function(a){for(var d=new Map,b=0;b<this._dirties.length;++b){var c=this._dirties[b],e=new Map,g;for(g in c.buffers){var f=c.buffers[g].data.vertices;(f.allDirty||null!=f.from&&null!=f.count)&&e.set(g,f)}c=c.data.indices;f=void 0;f=c.allDirty||null!=c.from&&null!=c.count?{indices:c,vertices:e}:{indices:void 0,vertices:e};(f.indices||0<f.vertices.size)&&d.set(b,f)}d.forEach(function(b,c){a({indices:b.indices||null,vertices:0<b.vertices.size?b.vertices:null},c)})};a.prototype.markDirtyIndices=function(a,
d,b){l(this._dirties[a].data.indices,d,b)};a.prototype.markDirtyVertices=function(a,d,b,c){l(this._dirties[a].buffers[d].data.vertices,b,c)};return a}();k.default=h});