// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/numberUtils",["dojo/has","dojo/number","dojo/i18n!dojo/cldr/nls/number","./kernel"],function(p,q,r,t){var u=function(b,a){return b-a},d={_reNumber:/^-?(\d+)(\.(\d+))?$/i,getDigits:function(b){var a=String(b),c=a.match(d._reNumber);b={integer:0,fractional:0};c&&c[1]?(b.integer=c[1].split("").length,b.fractional=c[3]?c[3].split("").length:0):-1<a.toLowerCase().indexOf("e")&&(c=a.split("e"),a=c[0],c=c[1],a&&c&&(a=Number(a),c=Number(c),(b=0<c)||(c=Math.abs(c)),a=d.getDigits(a),b?(a.integer+=
c,a.fractional=c>a.fractional?0:a.fractional-c):(a.fractional+=c,a.integer=c>a.integer?1:a.integer-c),b=a));return b},getFixedNumbers:function(b,a){var c;c=Number(b.toFixed(a));c<b?b=c+1/Math.pow(10,a):(b=c,c-=1/Math.pow(10,a));c=Number(c.toFixed(a));b=Number(b.toFixed(a));return[c,b]},getPctChange:function(b,a,c,d){var f={prev:null,next:null},e;null!=c&&(e=b-c,f.prev=Math.floor(Math.abs(100*(a-c-e)/e)));null!=d&&(e=d-b,f.next=Math.floor(Math.abs(100*(d-a-e)/e)));return f},round:function(b,a){b=b.slice(0);
var c,l,f,e,g,m,n,h,p=a&&null!=a.tolerance?a.tolerance:2,k=a&&a.indexes,q=a&&null!=a.strictBounds?a.strictBounds:!1;if(k)k.sort(u);else for(k=[],g=0;g<b.length;g++)k.push(g);for(g=0;g<k.length;g++)if(h=k[g],a=b[h],c=0===h?null:b[h-1],l=h===b.length-1?null:b[h+1],f=d.getDigits(a),f=f.fractional){m=0;for(n=!1;m<=f&&!n;)e=d.getFixedNumbers(a,m),e=q&&0===g?e[1]:e[0],n=d.hasMinimalChange(a,e,c,l,p),m++;n&&(b[h]=e)}return b},hasMinimalChange:function(b,a,c,l,f){b=d.getPctChange(b,a,c,l);a=null==b.prev||
b.prev<=f;c=null==b.next||b.next<=f;return a&&c||b.prev+b.next<=2*f},_reAllZeros:new RegExp("\\"+r.decimal+"0+$","g"),_reSomeZeros:/(\d)0*$/g,format:function(b,a){a=a||{places:20,round:-1};(b=q.format(b,a))&&(b=b.replace(d._reSomeZeros,"$1").replace(d._reAllZeros,""));return b}};p("extend-esri")&&(t.numberUtils=d);return d});