// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.32/esri/copyright.txt for details.
//>>built
define("esri/tasks/locationproviders/StandardGeographyQueryLocationProvider","../../declare dojo/_base/lang dojo/_base/array dojo/string ../../lang ../../geometry/jsonUtils ./LocationProviderRemoteBase".split(" "),function(k,l,m,d,n,p,q){return k("esri.tasks.locationproviders.StandardGeographyQueryLocationProvider",q,{standardGeographyQueryTask:null,queryParameters:null,geographyQueryTemplate:null,geometryType:"esriGeometryPolygon",constructor:function(){this.queryParameters||(this.queryParameters=
{});this.queryParameters.returnCentroids&&(this.geometryType="esriGeometryPoint")},_batchWillOverflow:function(a,b){return 100<a.length+1},_locateBatch:function(a){var b=l.mixin({},this.queryParameters,{geographyQueries:m.map(a,function(a,b){a=a.expression;a.OBJECTID=b;return a})});n.isDefined(b.generalizationLevel)||(b.generalizationLevel=6);b.returnGeometry=!1===this.queryParameters.returnGeometry?!1:!0;return this.standardGeographyQueryTask.execute(b).then(function(b){for(var d=[],f=0;f<b.featureSet.features.length;f++){var e=
b.featureSet.features[f];if(e)for(var c=0;c<a.length;c++){var g=a[c];if(g.expression.OBJECTID==e.attributes.ResultID){for(c=0;c<g.features.length;c++){var h=g.features[c];e.geometry&&(h.geometry=p.fromJson(e.geometry),d.push(h))}break}}}return d})},_createKey:function(a,b){return d.substitute(this.geographyQueryTemplate,a.attributes)},_createQueryExpression:function(a){return{QUERY:d.substitute(this.geographyQueryTemplate,a.attributes)}}})});